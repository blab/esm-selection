/*! For license information please see auspice.chunk.862.bundle.b56117b528d4c8a49aee.js.LICENSE.txt */
(self.webpackChunkauspice=self.webpackChunkauspice||[]).push([[862],{28718:function(e,t){var n,r;function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}n=function e(){"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},n=!t.document&&!!t.postMessage,r=n&&/blob:/i.test((t.location||{}).protocol),o={},a=0,s={parse:function(n,r){var i=(r=r||{}).dynamicTyping||!1;if(k(i)&&(r.dynamicTypingFunction=i,i={}),r.dynamicTyping=i,r.transform=!!k(r.transform)&&r.transform,r.worker&&s.WORKERS_SUPPORTED){var l=function(){if(!s.WORKERS_SUPPORTED)return!1;var n,r,i=(n=t.URL||t.webkitURL||null,r=e.toString(),s.BLOB_URL||(s.BLOB_URL=n.createObjectURL(new Blob(["(",r,")();"],{type:"text/javascript"})))),l=new t.Worker(i);return l.onmessage=y,l.id=a++,o[l.id]=l}();return l.userStep=r.step,l.userChunk=r.chunk,l.userComplete=r.complete,l.userError=r.error,r.step=k(r.step),r.chunk=k(r.chunk),r.complete=k(r.complete),r.error=k(r.error),delete r.worker,void l.postMessage({input:n,config:r,workerId:l.id})}var c=null;return s.NODE_STREAM_INPUT,"string"==typeof n?c=r.download?new u(r):new d(r):!0===n.readable&&k(n.read)&&k(n.on)?c=new p(r):(t.File&&n instanceof File||n instanceof Object)&&(c=new h(r)),c.stream(n)},unparse:function(e,t){var n=!1,r=!0,o=",",a="\r\n",l='"',c=l+l,u=!1,h=null,d=!1;!function(){if("object"==i(t)){if("string"!=typeof t.delimiter||s.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(o=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(u=t.skipEmptyLines),"string"==typeof t.newline&&(a=t.newline),"string"==typeof t.quoteChar&&(l=t.quoteChar),"boolean"==typeof t.header&&(r=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");h=t.columns}void 0!==t.escapeChar&&(c=t.escapeChar+l),"boolean"==typeof t.escapeFormulae&&(d=t.escapeFormulae)}}();var p=new RegExp(m(l),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return f(null,e,u);if("object"==i(e[0]))return f(h||Object.keys(e[0]),e,u)}else if("object"==i(e))return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==i(e.data[0])?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==i(e.data[0])||(e.data=[e.data])),f(e.fields||[],e.data||[],u);throw new Error("Unable to serialize unrecognized input");function f(e,t,n){var i="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var s=Array.isArray(e)&&0<e.length,l=!Array.isArray(t[0]);if(s&&r){for(var c=0;c<e.length;c++)0<c&&(i+=o),i+=g(e[c],c);0<t.length&&(i+=a)}for(var u=0;u<t.length;u++){var h=s?e.length:t[u].length,d=!1,p=s?0===Object.keys(t[u]).length:0===t[u].length;if(n&&!s&&(d="greedy"===n?""===t[u].join("").trim():1===t[u].length&&0===t[u][0].length),"greedy"===n&&s){for(var f=[],m=0;m<h;m++){var y=l?e[m]:m;f.push(t[u][y])}d=""===f.join("").trim()}if(!d){for(var v=0;v<h;v++){0<v&&!p&&(i+=o);var b=s&&l?e[v]:v;i+=g(t[u][b],v)}u<t.length-1&&(!n||0<h&&!p)&&(i+=a)}}return i}function g(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);!0===d&&"string"==typeof e&&null!==e.match(/^[=+\-@].*$/)&&(e="'"+e);var r=e.toString().replace(p,c),i="boolean"==typeof n&&n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1}(r,s.BAD_DELIMITERS)||-1<r.indexOf(o)||" "===r.charAt(0)||" "===r.charAt(r.length-1);return i?l+r+l:r}}};if(s.RECORD_SEP=String.fromCharCode(30),s.UNIT_SEP=String.fromCharCode(31),s.BYTE_ORDER_MARK="\ufeff",s.BAD_DELIMITERS=["\r","\n",'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!n&&!!t.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=g,s.ParserHandle=f,s.NetworkStreamer=u,s.FileStreamer=h,s.StringStreamer=d,s.ReadableStreamStreamer=p,t.jQuery){var l=t.jQuery;l.fn.parse=function(e){var n=e.config||{},r=[];return this.each((function(e){if("INPUT"!==l(this).prop("tagName").toUpperCase()||"file"!==l(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)r.push({file:this.files[i],inputElem:this,instanceConfig:l.extend({},n)})})),o(),this;function o(){if(0!==r.length){var t,n,o,c=r[0];if(k(e.before)){var u=e.before(c.file,c.inputElem);if("object"==i(u)){if("abort"===u.action)return"AbortError",t=c.file,n=c.inputElem,o=u.reason,void(k(e.error)&&e.error({name:"AbortError"},t,n,o));if("skip"===u.action)return void a();"object"==i(u.config)&&(c.instanceConfig=l.extend(c.instanceConfig,u.config))}else if("skip"===u)return void a()}var h=c.instanceConfig.complete;c.instanceConfig.complete=function(e){k(h)&&h(e,c.file,c.inputElem),a()},s.parse(c.file,c.instanceConfig)}else k(e.complete)&&e.complete()}function a(){r.splice(0,1),o()}}}function c(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=w(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new f(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,n){if(this.isFirstChunk&&k(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(e);void 0!==i&&(e=i)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+e;this._partialLine="";var a=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=a.meta.cursor;this._finished||(this._partialLine=o.substring(l-this._baseIndex),this._baseIndex=l),a&&a.data&&(this._rowCount+=a.data.length);var c=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)t.postMessage({results:a,workerId:s.WORKER_ID,finished:c});else if(k(this._config.chunk)&&!n){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);a=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!c||!k(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),c||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(e){k(this._config.error)?this._config.error(e):r&&this._config.error&&t.postMessage({workerId:s.WORKER_ID,error:e,finished:!1})}}function u(e){var t;(e=e||{}).chunkSize||(e.chunkSize=s.RemoteChunkSize),c.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),n||(t.onload=E(this._chunkLoaded,this),t.onerror=E(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var r in e)t.setRequestHeader(r,e[r])}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+i)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}n&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader("Content-Range");return null===t?-1:parseInt(t.substring(t.lastIndexOf("/")+1))}(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){var n=t.statusText||e;this._sendError(new Error(n))}}function h(e){var t,n;(e=e||{}).chunkSize||(e.chunkSize=s.LocalChunkSize),c.call(this,e);var r="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,r?((t=new FileReader).onload=E(this._chunkLoaded,this),t.onerror=E(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,i)}var o=t.readAsText(e,this._config.encoding);r||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function d(e){var t;c.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,n=this._config.chunkSize;return n?(e=t.substring(0,n),t=t.substring(n)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function p(e){c.call(this,e=e||{});var t=[],n=!0,r=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=E((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=E((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=E((function(){this._streamCleanUp(),r=!0,this._streamData("")}),this),this._streamCleanUp=E((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function f(e){var t,n,r,i=Math.pow(2,53),o=-i,a=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,l=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,c=this,u=0,h=0,d=!1,p=!1,f=[],y={data:[],errors:[],meta:{}};if(k(e.step)){var v=e.step;e.step=function(t){if(y=t,x())E();else{if(E(),0===y.data.length)return;u+=t.data.length,e.preview&&u>e.preview?n.abort():(y.data=y.data[0],v(y,c))}}}function b(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function E(){if(y&&r&&(T("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),r=!1),e.skipEmptyLines)for(var t=0;t<y.data.length;t++)b(y.data[t])&&y.data.splice(t--,1);return x()&&function(){if(y)if(Array.isArray(y.data[0])){for(var t=0;x()&&t<y.data.length;t++)y.data[t].forEach(n);y.data.splice(0,1)}else y.data.forEach(n);function n(t,n){k(e.transformHeader)&&(t=e.transformHeader(t,n)),f.push(t)}}(),function(){if(!y||!e.header&&!e.dynamicTyping&&!e.transform)return y;function t(t,n){var r,i=e.header?{}:[];for(r=0;r<t.length;r++){var o=r,a=t[r];e.header&&(o=r>=f.length?"__parsed_extra":f[r]),e.transform&&(a=e.transform(a,o)),a=S(o,a),"__parsed_extra"===o?(i[o]=i[o]||[],i[o].push(a)):i[o]=a}return e.header&&(r>f.length?T("FieldMismatch","TooManyFields","Too many fields: expected "+f.length+" fields but parsed "+r,h+n):r<f.length&&T("FieldMismatch","TooFewFields","Too few fields: expected "+f.length+" fields but parsed "+r,h+n)),i}var n=1;return!y.data.length||Array.isArray(y.data[0])?(y.data=y.data.map(t),n=y.data.length):y.data=t(y.data,0),e.header&&y.meta&&(y.meta.fields=f),h+=n,y}()}function x(){return e.header&&0===f.length}function S(t,n){return r=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[r]&&(e.dynamicTyping[r]=e.dynamicTypingFunction(r)),!0===(e.dynamicTyping[r]||e.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(e){if(a.test(e)){var t=parseFloat(e);if(o<t&&t<i)return!0}return!1}(n)?parseFloat(n):l.test(n)?new Date(n):""===n?null:n):n;var r}function T(e,t,n,r){var i={type:e,code:t,message:n};void 0!==r&&(i.row=r),y.errors.push(i)}this.parse=function(i,o,a){var l=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var n=new RegExp(m(t)+"([^]*?)"+m(t),"gm"),r=(e=e.replace(n,"")).split("\r"),i=e.split("\n"),o=1<i.length&&i[0].length<r[0].length;if(1===r.length||o)return"\n";for(var a=0,s=0;s<r.length;s++)"\n"===r[s][0]&&a++;return a>=r.length/2?"\r\n":"\r"}(i,l)),r=!1,e.delimiter)k(e.delimiter)&&(e.delimiter=e.delimiter(i),y.meta.delimiter=e.delimiter);else{var c=function(t,n,r,i,o){var a,l,c,u;o=o||[",","\t","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var h=0;h<o.length;h++){var d=o[h],p=0,f=0,m=0;c=void 0;for(var y=new g({comments:i,delimiter:d,newline:n,preview:10}).parse(t),v=0;v<y.data.length;v++)if(r&&b(y.data[v]))m++;else{var w=y.data[v].length;f+=w,void 0!==c?0<w&&(p+=Math.abs(w-c),c=w):c=w}0<y.data.length&&(f/=y.data.length-m),(void 0===l||p<=l)&&(void 0===u||u<f)&&1.99<f&&(l=p,a=d,u=f)}return{successful:!!(e.delimiter=a),bestDelimiter:a}}(i,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);c.successful?e.delimiter=c.bestDelimiter:(r=!0,e.delimiter=s.DefaultDelimiter),y.meta.delimiter=e.delimiter}var u=w(e);return e.preview&&e.header&&u.preview++,t=i,n=new g(u),y=n.parse(t,o,a),E(),d?{meta:{paused:!0}}:y||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,n.abort(),t=k(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){c.streamer._halted?(d=!1,c.streamer.parseChunk(t,!0)):setTimeout(c.resume,3)},this.aborted=function(){return p},this.abort=function(){p=!0,n.abort(),y.meta.aborted=!0,k(e.complete)&&e.complete(y),t=""}}function m(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(e){var t,n=(e=e||{}).delimiter,r=e.newline,i=e.comments,o=e.step,a=e.preview,l=e.fastMode,c=t=void 0===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(c=e.escapeChar),("string"!=typeof n||-1<s.BAD_DELIMITERS.indexOf(n))&&(n=","),i===n)throw new Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||-1<s.BAD_DELIMITERS.indexOf(i))&&(i=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var u=0,h=!1;this.parse=function(e,s,d){if("string"!=typeof e)throw new Error("Input must be a string");var p=e.length,f=n.length,g=r.length,y=i.length,v=k(o),b=[],w=[],E=[],x=u=0;if(!e)return B();if(l||!1!==l&&-1===e.indexOf(t)){for(var S=e.split(r),T=0;T<S.length;T++){if(E=S[T],u+=E.length,T!==S.length-1)u+=r.length;else if(d)return B();if(!i||E.substring(0,y)!==i){if(v){if(b=[],P(E.split(n)),M(),h)return B()}else P(E.split(n));if(a&&a<=T)return b=b.slice(0,a),B(!0)}}return B()}for(var C=e.indexOf(n,u),O=e.indexOf(r,u),_=new RegExp(m(c)+m(t),"g"),j=e.indexOf(t,u);;)if(e[u]!==t)if(i&&0===E.length&&e.substring(u,u+y)===i){if(-1===O)return B();u=O+g,O=e.indexOf(r,u),C=e.indexOf(n,u)}else if(-1!==C&&(C<O||-1===O))E.push(e.substring(u,C)),u=C+f,C=e.indexOf(n,u);else{if(-1===O)break;if(E.push(e.substring(u,O)),A(O+g),v&&(M(),h))return B();if(a&&b.length>=a)return B(!0)}else for(j=u,u++;;){if(-1===(j=e.indexOf(t,j+1)))return d||w.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:b.length,index:u}),N();if(j===p-1)return N(e.substring(u,j).replace(_,t));if(t!==c||e[j+1]!==c){if(t===c||0===j||e[j-1]!==c){-1!==C&&C<j+1&&(C=e.indexOf(n,j+1)),-1!==O&&O<j+1&&(O=e.indexOf(r,j+1));var L=R(-1===O?C:Math.min(C,O));if(e[j+1+L]===n){E.push(e.substring(u,j).replace(_,t)),e[u=j+1+L+f]!==t&&(j=e.indexOf(t,u)),C=e.indexOf(n,u),O=e.indexOf(r,u);break}var I=R(O);if(e.substring(j+1+I,j+1+I+g)===r){if(E.push(e.substring(u,j).replace(_,t)),A(j+1+I+g),C=e.indexOf(n,u),j=e.indexOf(t,u),v&&(M(),h))return B();if(a&&b.length>=a)return B(!0);break}w.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:b.length,index:u}),j++}}else j++}return N();function P(e){b.push(e),x=u}function R(t){var n=0;if(-1!==t){var r=e.substring(j+1,t);r&&""===r.trim()&&(n=r.length)}return n}function N(t){return d||(void 0===t&&(t=e.substring(u)),E.push(t),u=p,P(E),v&&M()),B()}function A(t){u=t,P(E),E=[],O=e.indexOf(r,u)}function B(e){return{data:b,errors:w,meta:{delimiter:n,linebreak:r,aborted:h,truncated:!!e,cursor:x+(s||0)}}}function M(){o(B()),b=[],w=[]}},this.abort=function(){h=!0},this.getCharIndex=function(){return u}}function y(e){var t=e.data,n=o[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var i={abort:function(){r=!0,v(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:b,resume:b};if(k(n.userStep)){for(var a=0;a<t.results.data.length&&(n.userStep({data:t.results.data[a],errors:t.results.errors,meta:t.results.meta},i),!r);a++);delete t.results}else k(n.userChunk)&&(n.userChunk(t.results,i,t.file),delete t.results)}t.finished&&!r&&v(t.workerId,t.results)}function v(e,t){var n=o[e];k(n.userComplete)&&n.userComplete(t),n.terminate(),delete o[e]}function b(){throw new Error("Not implemented.")}function w(e){if("object"!=i(e)||null===e)return e;var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=w(e[n]);return t}function E(e,t){return function(){e.apply(t,arguments)}}function k(e){return"function"==typeof e}return r&&(t.onmessage=function(e){var n=e.data;if(void 0===s.WORKER_ID&&n&&(s.WORKER_ID=n.workerId),"string"==typeof n.input)t.postMessage({workerId:s.WORKER_ID,results:s.parse(n.input,n.config),finished:!0});else if(t.File&&n.input instanceof File||n.input instanceof Object){var r=s.parse(n.input,n.config);r&&t.postMessage({workerId:s.WORKER_ID,results:r,finished:!0})}}),(u.prototype=Object.create(c.prototype)).constructor=u,(h.prototype=Object.create(c.prototype)).constructor=h,(d.prototype=Object.create(d.prototype)).constructor=d,(p.prototype=Object.create(c.prototype)).constructor=p,s},void 0===(r=n.apply(t,[]))||(e.exports=r)},58548:function(e,t,n){var r,i,o,a;function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}e=n.nmd(e),a=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==s(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){e.exports=n(2)()},function(t,n){t.exports=e},function(e,t,n){"use strict";var r=n(3);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),o=n(0),a=n.n(o),l=function(e){return 0!==e};function c(e){return(c="function"==typeof Symbol&&"symbol"==s(Symbol.iterator)?function(e){return s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":s(e)})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(r,e);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?d(e):t}(this,n)}}(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),f(d(t=n.call(this,e)),"continueOpenCollapsible",(function(){var e=d(t).innerRef;t.setState({height:e.scrollHeight,transition:"height ".concat(t.props.transitionTime,"ms ").concat(t.props.easing),isClosed:!1,hasBeenOpened:!0,inTransition:l(e.scrollHeight),shouldOpenOnNextCycle:!1})})),f(d(t),"handleTriggerClick",(function(e){t.props.triggerDisabled||t.state.inTransition||(e.preventDefault(),t.props.handleTriggerClick?t.props.handleTriggerClick(t.props.accordionPosition):!0===t.state.isClosed?(t.openCollapsible(),t.props.onOpening(),t.props.onTriggerOpening()):(t.closeCollapsible(),t.props.onClosing(),t.props.onTriggerClosing()))})),f(d(t),"handleTransitionEnd",(function(e){e.target===t.innerRef&&(t.state.isClosed?(t.setState({inTransition:!1}),t.props.onClose()):(t.setState({height:"auto",overflow:t.props.overflowWhenOpen,inTransition:!1}),t.props.onOpen()))})),f(d(t),"setInnerRef",(function(e){return t.innerRef=e})),t.timeout=void 0,t.contentId="collapsible-content-".concat(Date.now()),t.triggerId=e.triggerElementProps.id||"collapsible-trigger-".concat(Date.now()),e.open?t.state={isClosed:!1,shouldSwitchAutoOnNextCycle:!1,height:"auto",transition:"none",hasBeenOpened:!0,overflow:e.overflowWhenOpen,inTransition:!1}:t.state={isClosed:!0,shouldSwitchAutoOnNextCycle:!1,height:0,transition:"height ".concat(e.transitionTime,"ms ").concat(e.easing),hasBeenOpened:!1,overflow:"hidden",inTransition:!1},t}return(t=[{key:"componentDidUpdate",value:function(e,t){var n=this;this.state.shouldOpenOnNextCycle&&this.continueOpenCollapsible(),"auto"!==t.height&&0!==t.height||!0!==this.state.shouldSwitchAutoOnNextCycle||(window.clearTimeout(this.timeout),this.timeout=window.setTimeout((function(){n.setState({height:0,overflow:"hidden",isClosed:!0,shouldSwitchAutoOnNextCycle:!1})}),50)),e.open!==this.props.open&&(!0===this.props.open?(this.openCollapsible(),this.props.onOpening()):(this.closeCollapsible(),this.props.onClosing()))}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.timeout)}},{key:"closeCollapsible",value:function(){var e=this.innerRef;this.setState({shouldSwitchAutoOnNextCycle:!0,height:e.scrollHeight,transition:"height ".concat(this.props.transitionCloseTime?this.props.transitionCloseTime:this.props.transitionTime,"ms ").concat(this.props.easing),inTransition:l(e.scrollHeight)})}},{key:"openCollapsible",value:function(){this.setState({inTransition:l(this.innerRef.scrollHeight),shouldOpenOnNextCycle:!0})}},{key:"renderNonClickableTriggerElement",value:function(){return this.props.triggerSibling&&"string"==typeof this.props.triggerSibling?i.a.createElement("span",{className:"".concat(this.props.classParentString,"__trigger-sibling")},this.props.triggerSibling):this.props.triggerSibling&&"function"==typeof this.props.triggerSibling?this.props.triggerSibling():this.props.triggerSibling?i.a.createElement(this.props.triggerSibling,null):null}},{key:"render",value:function(){var e=this,t={height:this.state.height,WebkitTransition:this.state.transition,msTransition:this.state.transition,transition:this.state.transition,overflow:this.state.overflow},n=this.state.isClosed?"is-closed":"is-open",r=this.props.triggerDisabled?"is-disabled":"",o=!1===this.state.isClosed&&void 0!==this.props.triggerWhenOpen?this.props.triggerWhenOpen:this.props.trigger,a=this.props.contentContainerTagName,s=this.props.triggerTagName,l=this.props.lazyRender&&!this.state.hasBeenOpened&&this.state.isClosed&&!this.state.inTransition?null:this.props.children,c=this.props,h=c.classParentString,d=c.contentOuterClassName,p=c.contentInnerClassName,f="".concat(h,"__trigger ").concat(n," ").concat(r," ").concat(this.state.isClosed?this.props.triggerClassName:this.props.triggerOpenedClassName),m="".concat(h," ").concat(this.state.isClosed?this.props.className:this.props.openedClassName),g="".concat(h,"__contentOuter ").concat(d),y="".concat(h,"__contentInner ").concat(p);return i.a.createElement(a,u({className:m.trim()},this.props.containerElementProps),i.a.createElement(s,u({id:this.triggerId,className:f.trim(),onClick:this.handleTriggerClick,style:this.props.triggerStyle&&this.props.triggerStyle,onKeyPress:function(t){var n=t.key;(" "===n&&"button"!==e.props.triggerTagName.toLowerCase()||"Enter"===n)&&e.handleTriggerClick(t)},tabIndex:this.props.tabIndex&&this.props.tabIndex,"aria-expanded":!this.state.isClosed,"aria-disabled":this.props.triggerDisabled,"aria-controls":this.contentId,role:"button"},this.props.triggerElementProps),o),this.renderNonClickableTriggerElement(),i.a.createElement("div",{id:this.contentId,className:g.trim(),style:t,onTransitionEnd:this.handleTransitionEnd,ref:this.setInnerRef,hidden:this.props.contentHiddenWhenClosed&&this.state.isClosed&&!this.state.inTransition,role:"region","aria-labelledby":this.triggerId},i.a.createElement("div",{className:y.trim()},l)))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(r.prototype,t),r}(r.Component);m.propTypes={transitionTime:a.a.number,transitionCloseTime:a.a.number,triggerTagName:a.a.string,easing:a.a.string,open:a.a.bool,containerElementProps:a.a.object,triggerElementProps:a.a.object,classParentString:a.a.string,className:a.a.string,openedClassName:a.a.string,triggerStyle:a.a.object,triggerClassName:a.a.string,triggerOpenedClassName:a.a.string,contentOuterClassName:a.a.string,contentInnerClassName:a.a.string,accordionPosition:a.a.oneOfType([a.a.string,a.a.number]),handleTriggerClick:a.a.func,onOpen:a.a.func,onClose:a.a.func,onOpening:a.a.func,onClosing:a.a.func,onTriggerOpening:a.a.func,onTriggerClosing:a.a.func,trigger:a.a.oneOfType([a.a.string,a.a.element]),triggerWhenOpen:a.a.oneOfType([a.a.string,a.a.element]),triggerDisabled:a.a.bool,lazyRender:a.a.bool,overflowWhenOpen:a.a.oneOf(["hidden","visible","auto","scroll","inherit","initial","unset"]),contentHiddenWhenClosed:a.a.bool,triggerSibling:a.a.oneOfType([a.a.element,a.a.func]),tabIndex:a.a.number,contentContainerTagName:a.a.string,children:a.a.oneOfType([a.a.string,a.a.element])},m.defaultProps={transitionTime:400,transitionCloseTime:null,triggerTagName:"span",easing:"linear",open:!1,classParentString:"Collapsible",triggerDisabled:!1,lazyRender:!1,overflowWhenOpen:"hidden",contentHiddenWhenClosed:!1,openedClassName:"",triggerStyle:null,triggerClassName:"",triggerOpenedClassName:"",contentOuterClassName:"",contentInnerClassName:"",className:"",triggerSibling:null,onOpen:function(){},onClose:function(){},onOpening:function(){},onClosing:function(){},onTriggerOpening:function(){},onTriggerClosing:function(){},tabIndex:null,contentContainerTagName:"div",triggerElementProps:{}},t.default=m}])},"object"==s(t)&&"object"==s(e)?e.exports=a(n(82684)):(i=[n(82684)],void 0===(o="function"==typeof(r=a)?r.apply(t,i):r)||(e.exports=o))},80075:(e,t,n)=>{"use strict";n.d(t,{Z:()=>X,P:()=>Y});var r=n(82684),i=n(4667),o=n(26439),a=n(14179),s=n(1359),l=n(493),c=n(63001),u=n(19146),h=n(70570),d=n(28718),p=n(11234),f=n(54710),m=n(37275),g=n(58640),y=n(12225),v=n(1974),b=n(56410);function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=k(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function k(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(e){return Object.prototype.hasOwnProperty.call(e,"paper_url")&&!e.paper_url.endsWith("/")&&"?"!==e.paper_url},C=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return""},i=t?function(e){return(0,m.rs)(e,"num_date")}:m.KT,o=e.nodes[e.idxOfFilteredRoot||e.idxOfInViewRootNode],a=function t(o,a){if(!o.shell.inView||e.visibility[o.arrayIdx]!==h.m7)return"";if(o.hasChildren){var s=o.children.map((function(e){return t(e,i(o))}));return"(".concat(s.filter((function(e){return!!e})).join(","),")")+"".concat(n?o.name:"").concat(r(o),":").concat(i(o)-a)}return"".concat(o.name).concat(r(o),":").concat(i(o)-a)}(o,i(o));if(!a)throw new v.i;return a+";"},O="text/tab-separated-values;charset=utf-8;",_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,d.unparse)(e,{quotes:!1,quoteChar:'"',escapeChar:'"',delimiter:"\t",header:!0,newline:"\n",skipEmptyLines:!0,columns:t})},j=function(e,t,n){var r=new Blob([n],{type:t}),i=document.createElement("a"),o=URL.createObjectURL(r);i.setAttribute("href",o),i.setAttribute("download",e),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)},L=function(e){var t=e.dispatch,n=e.filePrefix,r=e.tree,i=e.isNewick,o=e.temporal,a=e.colorings,s=e.colorBy;try{var l="".concat(n,"_").concat(o?"timetree":"tree",".").concat(i?"nwk":"nexus"),c=i?C(r,o):function(e,t,n,r){var i,o;return["#nexus","begin trees;","  tree one = "+C(e,r,!0,(i=function(e){return String(e).replace(/[[\]{}=,]/g,"").replace(/[\u0250-\ue007]/g,"")},o=(0,y.O$)(n)?i(n.replace(/,/g,"/")):void 0,function(e){var n=[];if(Object.keys(t).forEach((function(t){if(!t.includes("_lab")&&!t.includes("author")){var r=(0,m.rs)(e,t);if(r){n.push("".concat(i(t),"=").concat(i(r)));var o=(0,m.rs)(e,t,{confidence:!0});Array.isArray(o)&&2===o.length&&n.push("".concat(i(t),"_CI={").concat(o.map((function(e){return i(e)})).join(","),"}"))}}})),o&&n.push("".concat(o,"=").concat(i(e.currentGt.replace(/\s/g,"")))),r){var a=(0,m.KT)(e);void 0!==a&&n.push("div=".concat(a))}return n.length?"[&".concat(n.join(","),"]"):""})),"end;"].join("\n")}(r,a,s,o);j(l,"text/plain;charset=utf-8;",c),t((0,p.a1)({message:"".concat(o?"TimeTree":"Tree"," written to ").concat(l)}))}catch(e){console.error(e);var u={message:"Error saving tree!"};e instanceof v.i&&(u.details="An empty tree was created. If you have selected genomes, note that we do not support downloads of multiple subtrees."),t((0,p.p5)(u))}},I=function(e){var t=e.match(/^(<.+?>)(.+)<\/.+?>$/);if(t){var n=t[1].match(/width.+?([0-9.]+).+height.+?([0-9.]+)/);if(n){var r=t[1].match(/viewBox="([0-9-]+)\s([0-9-]+)\s([0-9-]+)\s([0-9-]+)"/);return{x:0,y:0,viewbox:r?r.slice(1):void 0,width:parseFloat(n[1]),height:parseFloat(n[2]),inner:t[2]}}}},P=function(e,t,n){var r='<svg id="'.concat(t,'" width="').concat(n.width,'" height="').concat(n.height,'" x="').concat(n.x,'" y="').concat(n.y,'">');e.push(r),e.push(n.inner),e.push("</svg>")},R=function(e,t,n,r,i,o){var a=[],s={tree:void 0,map:void 0,entropy:void 0,frequencies:void 0};if(-1!==n.indexOf("tree")){try{s.tree=I((new XMLSerializer).serializeToString(document.getElementById("MainTree"))),s.treeLegend=I((new XMLSerializer).serializeToString(document.getElementById("TreeLegendContainer")))}catch(e){s.tree=void 0,a.push("tree"),console.error("Tree SVG save error:",e)}if(s.tree&&document.getElementById("SecondTree"))try{s.secondTree=I((new XMLSerializer).serializeToString(document.getElementById("SecondTree"))),document.getElementById("Tangle")&&(s.tangle=I((new XMLSerializer).serializeToString(document.getElementById("Tangle"))))}catch(e){a.push("second tree / tanglegram"),console.error("Second Tree / tanglegram SVG save error:",e)}}if(-1!==n.indexOf("entropy"))try{s.entropy=I((new XMLSerializer).serializeToString(document.getElementById("d3entropyParent")))}catch(e){s.entropy=void 0,a.push("entropy"),console.error("Entropy SVG save error:",e)}if(-1!==n.indexOf("frequencies"))try{s.frequencies=I((new XMLSerializer).serializeToString(document.getElementById("d3frequenciesSVG")))}catch(e){s.frequencies=void 0,a.push("frequencies"),console.error("Frequencies SVG save error:",e)}-1!==n.indexOf("map")&&o&&(s.map={x:0,y:0,viewbox:void 0,width:parseFloat(o.mapDimensions.x),height:parseFloat(o.mapDimensions.y),inner:o.mapSvg});var l=[],c=function(e,t,n){var r=50,i=0,o=0;for(var a in e.secondTree&&(e.secondTree.x=f.yY+e.tree.width,e.tree.width+=f.yY+e.secondTree.width),e.tree&&e.map?"grid"===t?(i=e.tree.width+r+e.map.width,o=Math.max(e.tree.height,e.map.height),e.map.x=e.tree.width+r):(i=Math.max(e.tree.width,e.map.width),o=e.tree.height+r+e.map.height,e.map.y=e.tree.height+r):e.tree?(i=e.tree.width,o=e.tree.height):e.map&&(i=e.map.width,o=e.map.height),e.entropy&&(i<e.entropy.width?i=e.entropy.width:e.entropy.x=(i-e.entropy.width)/2,o?(e.entropy.y=o+r,o+=r+e.entropy.height):o=e.entropy.height),e.frequencies&&(i<e.frequencies.width?i=e.frequencies.width:e.frequencies.x=(i-e.frequencies.width)/2,o?(e.frequencies.y=o+r,o+=r+e.frequencies.height):o=e.frequencies.height),e)e[a]&&(e[a].x+=r,e[a].y+=r);o+=100;var s=36*n+20;return{width:i+=100,height:o+=s,padding:r,textY:o-s,textHeight:s}}(s,r,i.length);for(var u in l.push('<svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="'.concat(c.width,'" height="').concat(c.height,'">')),s)s[u]&&P(l,u,s[u]);l.push('<foreignObject x="'.concat(c.padding,'" y="').concat(c.height-c.textHeight,'" height="').concat(c.textHeight,'" width="').concat(c.width-2*c.padding,'">')),i.forEach((function(e){l.push('<p xmlns="http://www.w3.org/1999/xhtml" style="font-family:lato,sans-serif;">'),l.push(e),l.push("</p>")})),l.push("</foreignObject>"),l.push("</svg>"),j(t+".svg","image/svg+xml;charset=utf-8",l.join("\n")),a.length?e((0,p.p5)({message:"Vector image saved",details:"Saved to ".concat(t,".svg, however there were errors with ").concat(a.join(", "))})):e((0,p.a1)({message:"Vector image saved",details:t+".svg"}))},N=n(57513);function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var B,M=(0,c.Zz)(u.oO),D=(0,c.Zz)(u.bz),F=(0,c.Zz)(u.h_),V=(0,c.Zz)(u.qz),z=25,G=function(e){var t=e.dispatch,n=e.t,i=e.tree,o=e.entropy,a=e.metadata,s=e.colorBy,c=e.distanceMeasure,u=e.panelsToDisplay,d=e.panelLayout,f=e.visibility,y=e.relevantPublications,v=a.mainTreeNumTips,k=(0,N.zk)(i.nodes,i.visibility),x=k!==v,C=q(),I="num_date"===c,P=!1;if("dataProvenance"in a){var B,G=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(a.dataProvenance);try{for(G.s();!(B=G.n()).done;){var U=B.value;"name"in U&&"GISAID"===U.name.toUpperCase()&&(P=!0)}}catch(e){G.e(e)}finally{G.f()}}var Z,H,K,J=(0,b.hA)(window.location.pathname),Y=!P&&J.some(Boolean),$=(null==o?void 0:o.selectedCds)===h.BJ?"nucleotide":"codon";return r.createElement(r.Fragment,null,r.createElement("div",{style:{fontWeight:500,marginTop:"0px",marginBottom:"20px"}},"Downloaded data represents the currently displayed view. By zooming the tree, changing the branch-length metric, applying filters etc, the downloaded data will change accordingly.",r.createElement("p",null),"NOTE: We do not support downloads of multiple subtrees, which are usually created with the date range filter or genotype filters. Downloading multiple subtrees will result in an empty Newick tree!",r.createElement("p",null),x?"Currently ".concat(k,"/").concat(v," tips are displayed and will be downloaded."):"Currently the entire dataset (".concat(v," tips) will be downloaded.")),Y&&r.createElement(W,{name:"Auspice (Nextstrain) JSON",description:"The main Auspice dataset JSON(s) for the current view",icon:r.createElement(V,{width:z,selected:!0}),onClick:function(){return function(e,t){var n=[];if(!t.some(Boolean))return console.error("Unable to fetch empty dataset names: ".concat(JSON.stringify(t))),e((0,p.A)({message:"Unable to download Auspice JSON (see console for more info)"}));var r,i=E(t);try{var o=function(){var t=r.value;if(!t)return"continue";var i=t.replace("/","_")+".json";n.push(i);var o=new b.qz(t);o.fetchMain(),o.main.then((function(e){j(i,"application/json",JSON.stringify(e))})).catch((function(n){console.error("Error fetching JSON for ".concat(t,": ").concat(n)),e((0,p.A)({message:"Error preparing ".concat(i," JSON for download (see console for more info)")}))}))};for(i.s();!(r=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}e((0,p.a1)({message:"Preparing Auspice JSON(s) for download: ".concat(n.join(", "))}))}(t,J)}}),r.createElement(W,{name:"".concat(I?"TimeTree":"Tree"," (Newick)"),description:"Phylogenetic tree in Newick format with branch lengths in units of ".concat(I?"years":"divergence","."),icon:r.createElement(M,{width:z,selected:!0}),onClick:function(){return L({isNewick:!0,dispatch:t,filePrefix:C,tree:i,temporal:I})}}),r.createElement(W,{name:"".concat(I?"TimeTree":"Tree"," (Nexus)"),description:"Phylogeny in Nexus format with branch lengths in units of ".concat(I?"years":"divergence",". Colorings are included as annotations."),icon:r.createElement(M,{width:z,selected:!0}),onClick:function(){return L({dispatch:t,filePrefix:C,tree:i,colorings:a.colorings,colorBy:s,temporal:I})}}),P&&r.createElement(W,{name:"Acknowledgments (TSV)",description:"Per-sample acknowledgments (n = ".concat(k,")."),icon:r.createElement(F,{width:z,selected:!0}),onClick:function(){return function(e,t,n,r){var i,o={},a=["strain"],s=E(n.entries());try{for(s.s();!(i=s.n()).done;){var l=w(i.value,2),c=l[0],u=l[1];if(!u.hasChildren&&r[c]===h.m7&&u.shell.inView&&(o[u.name]={strain:u.name},u.node_attrs)){for(var d=0,f=["gisaid_epi_isl","genbank_accession","originating_lab","submitting_lab"];d<f.length;d++){var g=f[d],y=(0,m.rs)(u,g);y&&(a.includes(g)||a.push(g),o[u.name][g]=y)}var v=(0,m.ZZ)(u);if(v){var b="author";a.includes(b)||a.push(b),o[u.name][b]=v.value,T(v)&&(o[u.name][b]+=" (".concat(v.paper_url,")"))}}}}catch(e){s.e(e)}finally{s.f()}var k="".concat(t,"_acknowledgements.tsv");j(k,O,_(Object.values(o),a)),e((0,p.a1)({message:"Acknowledgments exported to ".concat(k)}))}(t,C,i.nodes,i.visibility)}}),!P&&r.createElement(W,{name:"Metadata (TSV)",description:"Per-sample metadata (n = ".concat(k,")."),icon:r.createElement(F,{width:z,selected:!0}),onClick:function(){return function(e,t,n,r){var i,o={},a=["strain"],s=E(n.entries());try{var l=function(){var e=w(i.value,2),t=e[0],n=e[1];if(n.hasChildren)return"continue";if(r[t]!==h.m7||!n.shell.inView)return"continue";if(o[n.name]={strain:n.name},!n.node_attrs)return"continue";var s=(0,m.rs)(n,"num_date");if(s){var l="date";a.includes(l)||a.push(l);var c=(0,m.rs)(n,"num_date",{confidence:!0});c&&c[0]!==c[1]?o[n.name][l]="".concat((0,g.hT)(s)," (").concat((0,g.hT)(c[0])," - ").concat((0,g.hT)(c[1]),")"):o[n.name][l]=(0,g.hT)(s)}var u,d=["author","div","num_date","vaccine","accession"],p=E(Object.keys(n.node_attrs).filter((function(e){return!d.includes(e)})));try{for(p.s();!(u=p.n()).done;){var f=u.value;a.includes(f)||a.push(f);var y=(0,m.rs)(n,f);y&&("string"==typeof y?o[n.name][f]=y:"number"==typeof y&&(o[n.name][f]=parseFloat(y).toFixed(2)))}}catch(e){p.e(e)}finally{p.f()}var v=(0,m.ZZ)(n);if(v){var b="author";a.includes(b)||a.push(b),o[n.name][b]=v.value,T(v)&&(o[n.name][b]+=" (".concat(v.paper_url,")"))}var k=(0,m.nt)(n);if(k&&k.selection_date){var x="vaccine_selection_date";a.includes(x)||a.push(x),o[n.name][x]=k.selection_date}var S=(0,m.Bu)(n);if("accession"in S){var C="accession";a.includes(C)||a.push(C),o[n.name][C]=S.accession}};for(s.s();!(i=s.n()).done;)l()}catch(e){s.e(e)}finally{s.f()}var c="".concat(t,"_metadata.tsv");j(c,O,_(Object.values(o),a)),e((0,p.a1)({message:"Metadata exported to ".concat(c)}))}(t,C,i.nodes,i.visibility)}}),function(e){for(var t=0;t<e.nodes.length;t++)if((0,m.ZZ)(e.nodes[t]))return!0;return!1}(i)&&r.createElement(W,{name:"Author Metadata (TSV)",description:"Metadata for ".concat(k," samples grouped by their ").concat((Z=i.nodes,H=i.visibility,K=new Set(Z.filter((function(e,t){return H[t]===h.m7&&e.shell.inView})).map((function(e){return(0,m.ZZ)(e)})).filter((function(e){return e&&e.value})).map((function(e){return e.value}))),K.size)," authors."),icon:r.createElement(F,{width:z,selected:!0}),onClick:function(){return function(e,t,n){var r="n (strains)",i="unknown",o={};n.nodes.filter((function(e,t){return n.visibility[t]===h.m7&&e.shell.inView})).filter((function(e){return!e.hasChildren})).forEach((function(e){var t,n=(0,m.ZZ)(e);n&&(o[n.value]?(o[n.value][r]+=1,o[n.value].strains.push(e.name)):o[n.value]=(S(t={Author:n.value,"publication title":n.title||i,journal:n.journal||i,"publication URL":T(n)?n.paper_url:i},r,1),S(t,"strains",[e.name]),t))}));var a=["Author",r,"publication title","journal","publication URL","strains"],s=t+"_authors.tsv";j(s,O,_(Object.values(o),a)),e((0,p.a1)({message:"Author metadata exported",details:s}))}(t,C,i)}}),o.loaded&&r.createElement(W,{name:"Genetic diversity data (TSV)",description:"The data behind the diversity panel showing ".concat(o.showCounts?"a count of changes across the tree":"normalised shannon entropy"," per ").concat($,"."),icon:r.createElement(F,{width:z,selected:!0}),onClick:function(){return function(e,t,n){var r={base:"x",gene:"prot",position:"codon",events:"y",entropy:"y"},i=n.selectedCds===h.BJ?["base"]:["gene","position"];i.push(n.showCounts?"events":"entropy");var o=n.bars.map((function(e){return Object.fromEntries(i.map((function(t){return[t,e[r[t]]]})))})),a="".concat(t,"_diversity.tsv");j(a,O,_(o,i)),e((0,p.a1)({message:"Diversity data exported to ".concat(a)}))}(t,C,o)}}),r.createElement(W,{name:"Screenshot (SVG)",description:"Screenshot of the current nextstrain display in SVG format; CC-BY licensed.",icon:r.createElement(D,{width:z,selected:!0}),onClick:function(){return function(e,t,n,r,i,o,a,s,c){var u=[];u.push(n.title),u.push("Last updated ".concat(n.updated));var h=window.location.href.replace(/&/g,"&amp;");u.push('Downloaded from <a href="'.concat(h,'">').concat(h,"</a> on ").concat((new Date).toLocaleString())),u.push((0,l.Cm)({mainTreeNumTips:n.mainTreeNumTips,nodes:r,visibility:i,t})),u.push(""),u.push("".concat(t("Data usage part 1"),' A full list of sequence authors is available via <a href="https://nextstrain.org">nextstrain.org</a>.')),u.push("Visualizations are licensed under CC-BY."),u.push("Relevant publications:"),c.forEach((function(e){u.push('<a href="'.concat(e.href,'">').concat(e.author,", ").concat(e.title,", ").concat(e.journal," (").concat(e.year,")</a>"))})),-1!==a.indexOf("map")?window.L.getMapSvg(R.bind(void 0,e,o,a,s,u)):R(e,o,a,s,u,void 0)}(t,n,a,i.nodes,f,q(),u,d,y)}}))};function W(e){var t=e.name,n=e.description,i=e.icon,o=e.onClick,s=Object.assign({},a.S5,{backgroundColor:"rgba(0,0,0,0)",paddingLeft:"10px",color:"white",minWidth:"300px",textAlign:"left"});return r.createElement("div",{key:t,onClick:o,style:{cursor:"pointer"}},i,r.createElement("button",{style:s,name:t},t),r.createElement("div",{style:{display:"inline-block",height:"30px",verticalAlign:"top",paddingTop:"6px"}},r.createElement("label",{style:{fontStyle:"italic",fontSize:"14px",color:"lightgray"},htmlFor:t},n)))}function q(){return"nextstrain_"+window.location.pathname.replace(/^\//,"").replace(/:/g,"-").replace(/\//g,"_")}function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function Z(){return Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z.apply(this,arguments)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){return K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},K(e,t)}function J(e){return J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},J(e)}var Y={nextstrain:{author:"Hadfield et al",title:"Nextstrain: real-time tracking of pathogen evolution",year:"2018",journal:"Bioinformatics",href:"https://doi.org/10.1093/bioinformatics/bty407"},treetime:{author:"Sagulenko et al",title:"TreeTime: Maximum-likelihood phylodynamic analysis",journal:"Virus Evolution",year:"2017",href:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5758920/"},titers:{author:"Neher et al",titleJournalYear:"Prediction, dynamics, and visualization of antigenic phenotypes of seasonal influenza viruses",journal:"PNAS",year:"2016",href:"http://www.pnas.org/content/113/12/E1701.abstract"}},$=(0,i.$j)((function(e){return{browserDimensions:e.browserDimensions.browserDimensions,colorBy:e.controls.colorBy,distanceMeasure:e.controls.distanceMeasure,metadata:e.metadata,entropy:e.entropy,tree:e.tree,nodes:e.tree.nodes,visibility:e.tree.visibility,panelsToDisplay:e.controls.panelsToDisplay,panelLayout:e.controls.panelLayout}}))(B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(u,e);var t,n,i,o,c=(i=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=J(i);if(o){var n=J(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===U(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),c.apply(this,arguments)}return t=u,(n=[{key:"getRelevantPublications",value:function(){var e=[Y.nextstrain,Y.treetime];return-1!==["cTiter","rb","ep","ne"].indexOf(this.props.colorBy)&&e.push(Y.titers),e}},{key:"formatPublications",value:function(e){return r.createElement("span",null,r.createElement("ul",null,e.map((function(e){return r.createElement("li",{key:e.href},r.createElement("a",{href:e.href,target:"_blank",rel:"noreferrer noopener"},e.author,", ",e.title,", ",r.createElement("i",null,e.journal)," (",e.year,")"))}))))}},{key:"render",value:function(){var e=this.props,t=e.t,n=e.metadata,i=this.getRelevantPublications();return r.createElement(r.Fragment,null,r.createElement("div",{style:a.fu.modalSubheading},n.title," (",t("last updated")," ",n.updated,")"),r.createElement("div",null,(0,l.Cm)({mainTreeNumTips:this.props.metadata.mainTreeNumTips,nodes:this.props.nodes,visibility:this.props.visibility,t:this.props.t})),r.createElement("div",{style:a.fu.break})," "+t("A full list of sequence authors is available via the TSV files below"),r.createElement("div",{style:a.fu.break}),(0,s.N)({},{preamble:{fontWeight:300},acknowledgments:{fontWeight:300}}),r.createElement("div",{style:a.fu.modalSubheading},t("Data usage policy")),t("Data usage part 1")+" "+t("Data usage part 2"),r.createElement("div",{style:a.fu.modalSubheading},t("Please cite the authors who contributed genomic data (where relevant), as well as")+":"),this.formatPublications(i),r.createElement("div",{style:a.fu.modalSubheading},t("Download data"),":"),r.createElement("div",{style:{display:"block",justifyContent:"space-around",marginLeft:"25px",width:"100%"}},r.createElement("div",{style:{width:"100%"}},r.createElement(G,Z({},this.props,{relevantPublications:i})))))}}])&&H(t.prototype,n),u}(r.Component))||B;const X=(0,o.Z)()($)},45862:(e,t,n)=>{"use strict";n.d(t,{Iv:()=>x,ZP:()=>T,oY:()=>O,ux:()=>C});var r,i=n(82684),o=n(4667),a=n(63001),s=n(26439),l=n(2739),c=n(14179),u=n(15742),h=n(18466),d=n(6074),p=n(80075),f=n(58852),m=n(40500);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var w=n(36878),E=(0,i.lazy)((function(){return n.e(452).then(n.bind(n,42452))})),k=i.createElement("span",{style:{marginLeft:10,marginRight:10}},""),x=a.ZP.div.withConfig({displayName:"fine-print__FinePrintStyles",componentId:"sc-129vvgi-0"})(["margin-left:30px;padding-bottom:30px;font-family:",";font-size:15px;font-weight:300;color:rgb(136,136,136);line-height:1.4;.line{margin-top:20px;margin-bottom:20px;border-bottom:1px solid #CCC;}.finePrint{font-size:14px;}.logoContainer{padding:1px 1px;margin-right:5px;width:24px;cursor:pointer;}.logo{margin-left:1px;margin-right:1px;margin-top:1px;margin-bottom:3px;}"],c.kU),S=(0,o.$j)((function(e){return{tree:e.tree,metadata:e.metadata,browserDimensions:e.browserDimensions.browserDimensions}}))(r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(s,e);var t,n,r,o,a=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(r);if(o){var n=b(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),a.apply(this,arguments)}return t=s,(n=[{key:"shouldComponentUpdate",value:function(e){return this.props.browserDimensions!==e.browserDimensions}},{key:"getUpdated",value:function(){var e=this.props.t;return this.props.metadata.updated?i.createElement("span",null,e("Data updated")," ",this.props.metadata.updated):null}},{key:"downloadDataButton",value:function(){var e=this,t=this.props.t;return i.createElement("button",{style:Object.assign({},c.S5,{backgroundColor:"rgba(0,0,0,0)",color:c.Vd,margin:0,padding:0}),onClick:function(){e.props.dispatch({type:u.i0,modal:"download"})}},i.createElement(l.aBF,null),i.createElement("span",{style:{position:"relative",paddingLeft:"3px"}}," "+t("Download data")))}},{key:"linkOutButton",value:function(){var e=this,t=this.props.t;return i.createElement("button",{style:Object.assign({},c.S5,{backgroundColor:"rgba(0,0,0,0)",color:c.Vd,margin:0,padding:0}),onClick:function(){e.props.dispatch({type:u.i0,modal:"linkOut"})}},i.createElement(l.Imv,null),i.createElement("span",{style:{position:"relative",paddingLeft:"3px"}}," "+t("View in other platforms")))}},{key:"render",value:function(){if(!this.props.metadata||!this.props.tree.nodes)return null;var e=this.props.width-30;return i.createElement(x,null,i.createElement("div",{style:{width:e}},i.createElement(h.Z,{className:"finePrint",wrap:"wrap"},this.getUpdated(),k,this.downloadDataButton(),(0,m.Z)()&&i.createElement(i.Fragment,null,k,this.linkOutButton()),k,i.createElement("a",{href:"https://docs.nextstrain.org/projects/auspice/page/releases/changelog.html",target:"_blank",rel:"noreferrer noopener"},"Auspice v"+d.version)),i.createElement("div",{style:{height:"5px"}}),O(),C()))}}])&&y(t.prototype,n),s}(i.Component))||r;const T=(0,s.Z)()(S);function C(){return i.createElement(h.Z,{className:"finePrint"},i.createElement("a",{className:"logoContainer",href:"https://nextstrain.org"},i.createElement("img",{alt:"nextstrain.org",className:"logo",width:"24px",src:w})),"Powered by Nextstrain (",i.createElement("a",{href:p.P.nextstrain.href,target:"_blank",rel:"noopener noreferrer"},p.P.nextstrain.author," ",i.createElement("i",null,p.P.nextstrain.journal)),")")}function O(){var e=(0,f.y)("finePrint")?(0,f.R)("finePrint"):null;return e?i.createElement(i.Suspense,{fallback:i.createElement(i.Fragment,null)},i.createElement(h.Z,{className:"finePrint"},i.createElement(E,{mdstring:e,placeholder:"This dataset contained a fine print message to be displayed here, however it wasn't correctly formatted."}))):null}},18466:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(82684),i=n(47329),o=n.n(i);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(d,e);var t,n,i,o,s=(i=d,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(i);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function d(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),s.apply(this,arguments)}return t=d,(n=[{key:"getStyles",value:function(){return{base:{display:"flex",flexDirection:this.props.direction,flexWrap:this.props.wrap,justifyContent:this.props.justifyContent,alignItems:this.props.alignItems,alignContent:this.props.alignContent,order:this.props.order,flexGrow:this.props.grow,flexShrink:this.props.shrink,flexBasis:this.props.basis,alignSelf:this.props.alignSelf},style:this.props.style}}},{key:"render",value:function(){var e=this.getStyles();return r.createElement("div",{id:this.props.id,onClick:this.props.clickHandler,style:l(l({},e.base),e.style)},this.props.children)}}])&&c(t.prototype,n),d}(r.Component);d(p,"propTypes",{direction:o().oneOf(["row","rowReverse","column","columnReverse"]),wrap:o().oneOf(["nowrap","wrap","wrap-reverse"]),justifyContent:o().oneOf(["flex-start","flex-end","center","space-between","space-around"]),alignItems:o().oneOf(["flex-start","flex-end","center","baseline","stretch"]),alignContent:o().oneOf(["flex-start","flex-end","center","space-between","space-around","stretch"]),grow:o().number,shrink:o().number,basis:o().string,order:o().number,alignSelf:o().oneOf(["auto","flex-start","flex-end","center","baseline","stretch"]),children:o().node.isRequired,clickHandler:o().func}),d(p,"defaultProps",{direction:"row",wrap:"nowrap",justifyContent:"center",alignItems:"center",alignContent:"stretch",grow:0,shrink:1,basis:"auto",alignSelf:"auto",order:0,style:{},clickHandler:function(){}});const f=p},1359:(e,t,n)=>{"use strict";n.d(t,{Z:()=>L,N:()=>T});var r=n(82684),i=n(4667),o=n(63001),a=n(58548),s=n.n(a),l=n(26439),c=n(2739),u=n(14179),h=n(18466),d=n(397),p=n(70570),f=n(63463),m=n(12225);var g,y=n(78401);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var x=(0,r.lazy)((function(){return n.e(452).then(n.bind(n,42452))})),S=o.ZP.div.withConfig({displayName:"footer__FooterStyles",componentId:"sc-n42vt4-0"})(["margin-left:30px;padding-bottom:0px;font-family:",";font-size:15px;font-weight:300;color:rgb(136,136,136);line-height:1.4;p{font-weight:300;}ol{font-weight:300;}ul{font-weight:300;}h1{font-weight:700;font-size:2.50em;margin:0.2em 0;}h2{font-weight:600;font-size:2.15em;margin:0.2em 0;}h3{font-weight:500;font-size:1.70em;margin:0.2em 0;}h4{font-weight:500;font-size:1.25em;margin:0.1em 0;}h5{font-weight:500;font-size:1.0em;margin:0.1em 0;}h6{font-weight:500;font-size:0.85em;margin:0.1em 0;}pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px;}pre code{padding:0;margin:0;overflow:visible;font-size:100%;line-height:inherit;word-wrap:normal;background-color:initial;border:0;}p code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px;}.line{margin-top:15px;margin-bottom:15px;border-bottom:1px solid #CCC;}.acknowledgments{margin-top:10px;}.filterList{margin-top:10px;line-height:1.0;}.imageContainer{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;}img{margin-left:30px;margin-right:30px;margin-top:2px;margin-bottom:2px;}table{font-weight:300;margin-bottom:1rem;th,td{text-align:left;padding:0.45rem;vertical-align:top;border-top:1px solid #dee2e6;}thead th{vertical-align:bottom;border-bottom:2px solid #dee2e6;}tbody + tbody{border-top:2px solid #dee2e6;}}"],u.kU),T=function(e,t){if(e.description)return r.createElement(r.Suspense,{fallback:r.createElement("div",null)},r.createElement(x,{className:"acknowledgments",mdstring:e.description,placeholder:"This dataset contained acknowledgements to be displayed here, however it wasn't correctly formatted."}));var i=r.createElement("div",null,"This work is made possible by the open sharing of genetic data by research groups from all over the world. We gratefully acknowledge their contributions.");return"nextstrain.org"===window.location.hostname?function(e,t){if(window.location.pathname.includes("inrb-drc"))return r.createElement("div",null,r.createElement("div",null,"This work is made possible by the open sharing of genetic data by research groups."),r.createElement("div",{className:"acknowledgments"},"These sequences were generated by the Democratic Republic of the Congo Sequencing Consortium led by the Institut National de Recherche Biomdicales (INRB), Kinshasa, DRC, partnered with the United States Army Medical Reseach Insititute of Infectious Diseases (USAMRIID), Maryland, USA; University of Nebraska Medical Center (UNMC), Nebraska, USA; Institut Pasteur de Dakar, Dakar, Senegal; TransVIHMI, Institut de Recherche pour le Dveloppement (IRD), Institut National de la Sant et de la Recherche Mdicale (INSERM), Universit de Montpellier, Montpellier, France."),r.createElement("div",{className:"acknowledgments"},"These data were shared with the Ministry of Health of the DRC, and with the public via this ",r.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://virological.org/t/drc-2018-viral-genome-characterization/230"},"virological.org")," post, which is continually updated. If you intend to use these sequences prior to publication, please contact Drs. Muyembe-Tamfum and Ahuka to coordinate."));if(!window.location.pathname.includes("community")){if(window.location.pathname.includes("ebola"))return function(e){return r.createElement("div",null,e,r.createElement("div",{className:"acknowledgments"},"Special thanks to Nick Loman, Matt Cotten, Ian Goodfellow and Paul Kellam for spearheading data sharing efforts during the outbreak. For a more complete phylogeographic analysis of these data see ",r.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://dx.doi.org/10.1038/nature22040"},"Dudas et al"),". Curated data used in the paper are available at ",r.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://github.com/ebov/space-time"},"github.com/ebov/space-time"),". The animation shown here was inspired by ",r.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://youtu.be/eWnIhWUpQiQ"},"a work")," by ",r.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://bedford.io/team/gytis-dudas/"},"Gytis Dudas"),"."))}(t);if(window.location.pathname.includes("zika"))return function(e){return r.createElement("div",null,e,r.createElement("div",{className:"acknowledgments"},"Special thanks to Nick Loman, Nathan Grubaugh, Kristof Theys, Nuno Faria, Kristian Andersen, Andrew Rambaut and Karl Erlandson for data sharing, comments and suggestions."))}(t);if(window.location.pathname.includes("mumps"))return function(e){return r.createElement("div",null,e,r.createElement("div",{className:"acknowledgments"},"Special thanks to Duah Alkam, Piroon Jenjaroenpun , Thidathip Wongsurawat, Zulema Udaondo, Preecha Patumcharoenpol, Michael Robeson, Dirk Haselow, William Mason, Intawat Nookaew, David Ussery, Se-Ran Jun, Jennifer Gardy, Shirlee Wohl, Jeff Joy, Patrick Stapleton, Nathan Yozwiak, Hayden Metsky, Agatha Jassem, Louise Moncla, Gytis Dudas and Pardis Sabeti for data sharing, comments and suggestions."))}(t);if(window.location.pathname.includes("lassa"))return function(e){return r.createElement("div",{className:"acknowledgments"},"This work is made possible by the open sharing of genetic data by research groups, including these groups currently collecting Lassa sequences:",r.createElement("p",null),r.createElement("a",{href:"http://acegid.org/"},"Christian Happi"),", ",r.createElement("a",{href:"https://www.sabetilab.org/"},"Pardis Sabeti"),", ",r.createElement("a",{href:"https://www.sabetilab.org/katherine-siddle/"},"Katherine Siddle")," and colleagues, whose data was shared via ",r.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://virological.org/t/new-lassa-virus-genomes-from-nigeria-2015-2016/191"},"this viroligical.org post. "),"If you intend to use these sequences prior to publication, please contact them directly to coordinate. ",r.createElement("span",{className:"link",onClick:function(){return e((0,d.Rb)("set","authors",["Odia_et_al"]))}},"Click here")," here to see these sequences in isolation.",r.createElement("p",null),"The Irrua specialist Teaching Hospital (ISTH) and Institute for Lassa Fever Research and Control (ILFRC), Irrua, Edo State, Nigeria;\n        The Bernhard-Nocht Institute for Tropical Medicine (BNITM), Hamburg, Germany;\n        Public Health England (PHE);\n        African Center of Excellence for Genomics of Infectious Disease (ACEGID ), Redeemers University, Ede, Nigeria;\n        Broad Institute of MIT and Harvard University (Cambridge, MA, USA).\n        For further details, including conditions of reuse, please contact ",r.createElement("a",{href:"mailto:epogbaini@yahoo.com"},"Ephraim Epogbaini"),", ",r.createElement("a",{href:"http://www.who.int/blueprint/about/stephan-gunther/en/"},"Stephan Gnther")," and ",r.createElement("a",{href:"https://rega.kuleuven.be/cev/ecv/lab-members/PhilippeLemey.html"},"Philippe Lemey"),". Their data was first shared via ",r.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://virological.org/t/2018-lasv-sequencing-continued/192/8"},"this viroligical.org post"),", which is continually updated. ",r.createElement("span",{className:"link",onClick:function(){return e((0,d.Rb)("set","authors",["ISTH-BNITM-PHE"]))}},"Click here")," here to see these sequences in isolation.")}(e);if(window.location.pathname.includes("WNV/NA"))return function(e){return r.createElement("div",{className:"acknowledgments"},"This work is possible due to the groups who have made their data openly available for analysis -\n        with a special thanks to Nikos Gurfield, Saran Grewal, Chris Barker, Ying Fang and the Andersen Lab for making ",r.createElement("a",{href:"https://andersen-lab.com/secrets/data/west-nile-genomics/"},"their data")," available ahead of publication. ","We also thank Simon Dellicour, Sebastian Lequime, Bram Vrancken, Philippe Lemey, Karthik Gangavarapu, Nate Matteson, Sharada Saraf\n        and Nathan Grubaugh for curating the original dataset; and Zhe Zheng and Anderson Brito helping with the updates\n        The data is being maintained by ",r.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://bedford.io/team/james-hadfield/"},"James Hadfield")," and ",r.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://grubaughlab.com"},"Nathan Grubaugh's lab."),r.createElement("p",null),"Our goal is to promote sequencing and sharing of West Nile virus genomes to improve our understanding of virus spread and evolution.\n        To aid in this effort, Nathan Grubaugh, Ryan Smith, and Kristian Andersen have initiated a large study,\n        including >70 collaborators from >30 US states, to sequence ~4,000 West Nile virus genomes from across the country: ",r.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://westnile4k.org/"},"WestNile 4K.")," Their website includes a complete list of collaborators and information on how to join the project.\n      To conduct such an ambitious sequencing project, they adapted their highly multiplexed PCR approach for ",r.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://www.nature.com/articles/nprot.2017.066"},"Zika virus sequencing")," on the Illumina and Minion platforms for West Nile Virus circulating in North America. Their ",r.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://grubaughlab.com/open-science/amplicon-sequencing/"},"sequencing protocol and primers")," are free to use.\n        If you have any questions about West Nile virus sequencing, or if you have unpublished data that you would like to share, please email ",r.createElement("a",{href:"emailto:grubaughlab@gmail.com"},"grubaughlab@gmail.com"),".",r.createElement("p",null),"All data shown here are coding-complete genomes.",r.createElement("p",null),"WNV is split into three phenotypically relevant strains - NY99, WN02 and SW03 (",r.createElement("span",{className:"link",onClick:function(){return e((0,f.j)("wnv_strain"))}},"click here")," to colour the tree by this). These strains are defined by these mutations (click to change the colouring of the tree):",r.createElement("ul",null,r.createElement("li",null,r.createElement("span",{className:"link",onClick:function(){return e((0,f.j)((0,m.bP)({gene:"env",positions:[159]})))}},"env-V159A")," designates the switch from NY99 (the original sequence) to WN02."),r.createElement("li",null,r.createElement("span",{className:"link",onClick:function(){return e((0,f.j)((0,m.bP)({gene:"NS4A",positions:[85]})))}},"NS4A-A85T")," designates the switch from WN02 to SW03 (WN02 displaced NY99; WN02 and SW03 co-circulate).")))}(e);if(window.location.pathname.includes("h7n9"))return r.createElement("div",{className:"acknowledgments"},"We thank the ",r.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://gisaid.org"},"GISAID Initiative")," for enabling genomic surveillance of influenza and for providing a critical data sharing platform, and all of the groups who contribute to it.");if(window.location.pathname.includes("flu"))return r.createElement("div",null,r.createElement("div",{className:"acknowledgments"},"We thank the",r.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://gisaid.org"},"GISAID Initiative"),"and the",r.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://www.who.int/influenza/gisrs_laboratory/en/"},"GISRS Network"),"for critical surveillance efforts and open data sharing. Titer data used in antigenic analysis was generated by the",r.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://www.cdc.gov/flu/"},"Influenza Division at the US Centers for Disease Control and Prevention"),", the",r.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://www.crick.ac.uk/research/worldwide-influenza-centre"},"Worldwide Influenza Centre at the Francis Crick Institute"),", the",r.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://www.vidrl.org.au/"},"Victorian Infectious Diseases Reference Laboratory at the Australian Peter Doherty Institute for Infection and Immunity"),"and the",r.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://www.niid.go.jp/niid/en/flu-e.html"},"Influenza Virus Research Center at the Japan National Institute of Infectious Diseases"),"."),r.createElement("div",{className:"acknowledgments"},"Special thanks to Jackie Katz, Dave Wentworth, Becky Garten, Vivien Dugan, Xiyan Xu, Elizabeth Neuhaus, Sujatha Seenu, John McCauley, Rod Daniels, Vicki Gregory, Kanta Subbarao, Ian Barr, Aeron Hurt, Takato Odagiri, Shinji Watanabe, Tomoko Kuwahara, Michael Lssig, Marta uksza, Richard Reeve, Colin Russell, Sebastian Maurer-Stroh and Peter Bogner for feedback and advice. This analysis represents an updated frontend to the Nextflu informatic pipeline, originally available at nextflu.org."),r.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.createElement("div",{style:{flex:5}}),r.createElement("a",{key:5,href:"https://gisaid.org",target:"_blank",rel:"noreferrer noopener",style:{display:"flex",flexDirection:"column",justifyContent:"center"}},r.createElement("img",{alt:"gisaid-logo",width:"120",src:n(69532)})),r.createElement("div",{style:{flex:1}}),r.createElement("a",{key:6,href:"http://www.who.int/influenza/gisrs_laboratory/en/",target:"_blank",rel:"noreferrer noopener"},r.createElement("img",{alt:"gisrs-logo",width:"120",src:n(69265)})),r.createElement("div",{style:{flex:5}})))}return r.createElement("div",null,t)}(t,i):r.createElement("div",null,i)},C=o.ZP.div.withConfig({displayName:"footer__TitleContainer",componentId:"sc-n42vt4-1"})(["display:flex;justify-content:space-between;margin:0px;padding:0px;"]),O=o.ZP.span.withConfig({displayName:"footer__IconContainer",componentId:"sc-n42vt4-2"})(["font-size:22px;font-weight:500;"]),_=function(e){var t=e.name,n=e.isExpanded,i=void 0!==n&&n;return r.createElement(C,null,t,r.createElement(O,null,i?r.createElement(c.$Pg,null):r.createElement(c.iUH,null)))},j=(0,i.$j)((function(e){return{tree:e.tree,totalStateCounts:e.tree.totalStateCounts,metadata:e.metadata,colorOptions:e.metadata.colorOptions,browserDimensions:e.browserDimensions.browserDimensions,activeFilters:e.controls.filters,filtersInFooter:e.controls.filtersInFooter}}))(g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(l,e);var t,n,i,o,a=(i=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(i);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"shouldComponentUpdate",value:function(e){if(this.props.tree.version!==e.tree.version||this.props.browserDimensions!==e.browserDimensions)return!0;if(Object.keys(this.props.activeFilters)!==Object.keys(e.activeFilters))return!0;if(Object.keys(this.props.activeFilters).length>0){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this.props.activeFilters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.props.activeFilters[r]!==e.activeFilters[r])return!0}}catch(e){n.e(e)}finally{n.f()}}return!1}},{key:"displayFilter",value:function(e){var t,n,i=this,o=this.props.t,a=this.props.totalStateCounts[e];if(!a)return null;var l,c,u,f=this.props.metadata.colorings[e]?this.props.metadata.colorings[e].title:e,m=(this.props.activeFilters[e]||[]).filter((function(e){return e.active})).map((function(e){return e.value})),g=r.createElement("div",null,o("Filter by {{filterTitle}}",{filterTitle:f})+" (n=".concat(a.size,")"),null!==(t=this.props.activeFilters)&&void 0!==t&&null!==(n=t[e])&&void 0!==n&&n.length?(l=this.props.dispatch,c=[e],u=o("Clear {{filterName}} filter",{filterName:e}),r.createElement(y.aT,{active:!0,extraStyles:{float:"right",margin:"0px 4px"},onClick:function(){c.forEach((function(e){return l((0,d.Rb)("set",e,[]))}))}},u)):null);return r.createElement("div",null,r.createElement(s(),{triggerWhenOpen:r.createElement(_,{name:g,isExpanded:!0}),trigger:r.createElement(_,{name:g}),triggerStyle:{cursor:"pointer",textDecoration:"none"},transitionTime:100},r.createElement("div",{className:"filterList"},r.createElement(h.Z,{wrap:"wrap",justifyContent:"flex-start",alignItems:"center"},Array.from(a.keys()).filter((function(e){return(0,p.mg)(e)})).sort().map((function(t){return r.createElement(y.aT,{key:t,active:-1!==m.indexOf(t),onClick:function(){return function(e,t,n,r){var i=-1===(t[n]||[]).map((function(e){return e.value})).indexOf(r)?"add":"remove";e((0,d.Rb)(i,n,[r]))}(i.props.dispatch,i.props.activeFilters,e,t)}},r.createElement("span",null,"".concat(t," (").concat(a.get(t),")")))}))))))}},{key:"render",value:function(){var e=this;if(!this.props.metadata||!this.props.tree.nodes)return null;var t=this.props.width-30;return r.createElement(S,null,r.createElement("div",{style:{width:t}},r.createElement("div",{className:"line"}),T(this.props.metadata,this.props.dispatch),r.createElement("div",{className:"line"}),this.props.filtersInFooter.map((function(t){return r.createElement("div",{key:t},e.displayFilter(t),r.createElement("div",{className:"line"}))}))))}}])&&w(t.prototype,n),l}(r.Component))||g;const L=(0,l.Z)()(j)},19146:(e,t,n)=>{"use strict";n.d(t,{SU:()=>o,_Q:()=>h,bp:()=>a,bz:()=>u,h_:()=>c,oO:()=>i,qI:()=>s,qz:()=>d,tj:()=>l});var r=n(82684),i=function(e){var t=e.theme,n=e.selected,i=e.width,o=n?t.selectedColor:t.unselectedColor;return r.createElement("svg",{width:i,height:i+5},r.createElement("g",{transform:"translate(0,2)"},r.createElement("svg",{width:i,height:i,viewBox:"16 19 27 22"},r.createElement("g",{id:"Group",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",transform:"translate(17.000000, 20.000000)"},r.createElement("polyline",{id:"Path-3",stroke:o,points:"2.94117647 12.8571429 2.94117647 18.6083984 17.8459616 18.6083984 17.8459616 16.0260882 24.870031 16.0260882"}),r.createElement("polyline",{id:"Path-4",stroke:o,points:"17.8500004 18.5714286 17.8500004 20 25.0119374 20"}),r.createElement("polyline",{id:"Path-5",stroke:o,points:"2.94117647 12.8571429 3.00303284 7.21191058 10.2360102 7.11220045 10.4159559 2.99881623 17.1561911 2.93803403 17.1561911 0 24.313534 0"}),r.createElement("polyline",{id:"Path-6",stroke:o,points:"17.1599998 2.85714286 17.1599998 4.28571429 24.512941 4.28571429"}),r.createElement("path",{d:"M0,12.8571429 L2.94117647,12.8571429",id:"Path-6",stroke:o}),r.createElement("polyline",{id:"Path-7",stroke:o,points:"10.2941176 7.14285714 10.2941176 11.4285714 24.5454676 11.4285714"})))))},o=function(e){var t=e.theme,n=e.selected,i=e.width,o=n?t.selectedColor:t.unselectedColor;return r.createElement("svg",{width:i,height:i+5},r.createElement("g",{transform:"translate(0,4)"},r.createElement("svg",{width:i,height:i,viewBox:"0 0 30 30 "},r.createElement("g",{id:"Group",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",transform:"translate(17.000000, 20.000000)"},r.createElement("polyline",{id:"Path-3",stroke:o,points:"-15 5 -15 -25 "}),r.createElement("polyline",{id:"Path-4",stroke:o,points:"-15 5 25 5"}),r.createElement("polyline",{id:"Path-5",stroke:o,points:"-12 3 20 -25 "}),r.createElement("circle",{id:"c-1",stroke:o,cx:"-8",cy:"0",r:"2"}),r.createElement("circle",{id:"c-2",stroke:o,cx:"4",cy:"-10",r:"2"}),r.createElement("circle",{id:"c-3",stroke:o,cx:"4",cy:"-15",r:"2"}),r.createElement("circle",{id:"c-4",stroke:o,cx:"-4",cy:"-5",r:"2"}),r.createElement("circle",{id:"c-5",stroke:o,cx:"-2",cy:"-11",r:"2"})))))},a=function(e){var t=e.theme,n=e.selected,i=e.width,o=n?t.selectedColor:t.unselectedColor;return r.createElement("svg",{width:i,height:i+5},r.createElement("g",{transform:"translate(0,4)"},r.createElement("svg",{width:i,height:i,viewBox:"0 0 30 30 "},r.createElement("g",{id:"Group",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",transform:"translate(17.000000, 20.000000)"},r.createElement("polyline",{id:"Path-3",stroke:o,points:"-15 5 -15 -25 "}),r.createElement("polyline",{id:"Path-4",stroke:o,points:"-15 5 25 5"}),r.createElement("circle",{id:"c-1",stroke:o,cx:"-8",cy:"0",r:"2"}),r.createElement("circle",{id:"c-2",stroke:o,cx:"3",cy:"0",r:"2"}),r.createElement("circle",{id:"c-3",stroke:o,cx:"8",cy:"-5",r:"2"}),r.createElement("circle",{id:"c-4",stroke:o,cx:"-4",cy:"-15",r:"2"}),r.createElement("circle",{id:"c-5",stroke:o,cx:"1",cy:"-11",r:"2"})))))},s=function(e){var t=e.theme,n=e.selected,i=e.width,o=n?t.selectedColor:t.unselectedColor;return r.createElement("svg",{width:i,height:i+5},r.createElement("g",{transform:"translate(0,0)"},r.createElement("svg",{width:i,height:i,viewBox:"14 14 25 26"},r.createElement("g",{id:"Group",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",transform:"translate(15.000000, 15.000000)"},r.createElement("path",{d:"M15,15 L17.6450195,15",id:"Path-12",stroke:o}),r.createElement("path",{d:"M15.229248,22.5795898 L15.229248,18.2854004 C15.229248,18.2854004 17.8465223,17.6291504 17.8508301,15.0574951 C17.8551378,12.4858398 15.2944336,11.9138184 15.2944336,11.9138184 L15.229248,7.53540039",id:"Path-13",stroke:o}),r.createElement("path",{d:"M7.63037109,6.10498047 L10.230957,9.08325195 C10.230957,9.08325195 12.25,7.08233714 15.126709,7.04162598 C18.003418,7.00091481 20.5390625,8.91748047 20.5390625,8.91748047 L22.9765625,5.60839844",id:"Path-14",stroke:o}),r.createElement("path",{d:"M0.15942005,4.99135298 L2.76065146,7.96962446 C2.76065146,7.96962446 4.78019556,5.96870965 7.65761856,5.92799848 C10.5350415,5.88728732 13.0713154,7.80385298 13.0713154,7.80385298 L15.5094204,4.49477094",id:"Path-14",stroke:o,transform:"translate(7.834420, 6.232198) rotate(-34.000000) translate(-7.834420, -6.232198) "}),r.createElement("path",{d:"M7.5,21.496582 L10.1005859,24.4748535 C10.1005859,24.4748535 12.1196289,22.4739387 14.9963379,22.4332275 C17.8730469,22.3925164 20.4086914,24.309082 20.4086914,24.309082 L22.8461914,21",id:"Path-14",stroke:o,transform:"translate(15.173096, 22.737427) scale(1, -1) translate(-15.173096, -22.737427) "})))))},l=function(e){var t=e.theme,n=e.selected,i=e.width,o=n?t.selectedColor:t.unselectedColor;return r.createElement("svg",{width:i,height:i+5},r.createElement("g",{transform:"translate(0,2)"},r.createElement("svg",{width:i,height:i,viewBox:"106 49 150 118"},r.createElement("polyline",{id:"Path-2",stroke:o,strokeWidth:"4",fill:"none",points:"108 77 125.182237 87.8599894 133.381156 119.402591 111.867082 144.368016"}),r.createElement("path",{d:"M125.2,87.5 L137.624777,70",id:"Path-3",stroke:o,strokeWidth:"4",fill:"none"}),r.createElement("polyline",{id:"Path-4",stroke:o,strokeWidth:"4",fill:"none",points:"133 119.331781 192.127357 119.400002 215.445998 80.3916603 203.946476 51.4000015"}),r.createElement("path",{d:"M215.5,80.5 L253.378522,73",id:"Path-5",stroke:o,strokeWidth:"4",fill:"none"}),r.createElement("path",{d:"M192,119.2 L229.854937,164.55391",id:"Path-6",stroke:o,strokeWidth:"4",fill:"none"}))))},c=function(e){var t=e.theme,n=e.selected,i=e.width,o=n?t.selectedColor:t.unselectedColor;return r.createElement("svg",{width:i,height:i+5},r.createElement("g",{transform:"translate(0,7)"},r.createElement("svg",{width:i,height:i,viewBox:"0 0 30 30 "},r.createElement("g",{id:"Group",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.createElement("line",{stroke:o,x1:"3.3",y1:"3.8",x2:"27.7",y2:"3.8"}),r.createElement("line",{stroke:o,x1:"3.3",y1:"9.2",x2:"27.7",y2:"9.2"}),r.createElement("line",{stroke:o,x1:"3.3",y1:"14.5",x2:"27.7",y2:"14.5"}),r.createElement("line",{stroke:o,x1:"3.3",y1:"19.9",x2:"27.7",y2:"19.9"}),r.createElement("line",{stroke:o,x1:"3.3",y1:"25.2",x2:"27.7",y2:"25.2"})))))},u=function(e){var t=e.theme,n=e.selected,i=e.width,o=n?t.selectedColor:t.unselectedColor;return r.createElement("svg",{width:i,height:i+5},r.createElement("g",{transform:"translate(0,6)"},r.createElement("svg",{width:i,height:i,viewBox:"0 0 30 30 "},r.createElement("g",{id:"Group",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},r.createElement("rect",{fill:"none",stroke:o,x:"1",y:"1",width:"14",height:"17"}),r.createElement("rect",{fill:"none",stroke:o,x:"15",y:"1",width:"14",height:"17"}),r.createElement("rect",{fill:"none",stroke:o,x:"1",y:"18",width:"28",height:"8"})))))},h=function(e){var t=e.theme,n=e.selected,i=e.width,o=n?t.selectedColor:t.unselectedColor;return r.createElement("svg",{width:i,height:i+5},r.createElement("g",{transform:"translate(0,6)"},r.createElement("svg",{width:i,height:i,viewBox:"0 0 30 30 "},r.createElement("g",{id:"Group",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},r.createElement("rect",{fill:"none",stroke:o,x:"1",y:"1",width:"7",height:"25"}),r.createElement("rect",{fill:"none",stroke:o,x:"8",y:"1",width:"20",height:"25"})))))},d=function(e){var t=e.theme,n=e.selected,i=e.width,o=n?t.selectedColor:t.unselectedColor;return r.createElement("svg",{width:i,height:i+5},r.createElement("g",{transform:"translate(0,7)"},r.createElement("svg",{width:i,height:i,viewBox:"0 0 30 30 "},r.createElement("g",{id:"Group",stroke:"none",strokeWidth:"3",fill:"none",fillRule:"evenodd"},r.createElement("path",{stroke:o,d:"M 11 3 L 1 15 L 11 27"}),r.createElement("path",{stroke:o,d:"M 19 3 L 29 15 L 19 27"})))))}},493:(e,t,n)=>{"use strict";n.d(t,{Cm:()=>c,P4:()=>l,gY:()=>s});var r=n(58640),i=n(70570),o=n(57513),a={country:"countries",authors:"authors"},s=function(e,t){return 1===t?"authors"===e&&(e="author"):(e in a&&(e=a[e]),"s"!==e.slice(-1).toLowerCase()&&(e+="s")),e.replace(/_/g," ")},l=function(e){var t="number"==typeof e?(0,r.hT)(e):e,n=t.split("-");return 3===n.length?"".concat(i.e7[n[1]]," ").concat(n[0]):t},c=function(e){var t=e.nodes,n=e.visibility,r=e.mainTreeNumTips,i=e.branchLengthsToDisplay,a=e.t,s=(0,o.zk)(t,n),c=(0,o.nQ)(t,n),u="";return(u+="divOnly"!==i&&s>0?a("Showing {{x}} of {{y}} genomes sampled between {{from}} and {{to}}",{x:s,y:r,from:l(c[0]),to:l(c[1])}):a("Showing {{x}} of {{y}} genomes",{x:s,y:r}))+"."}},78401:(e,t,n)=>{"use strict";n.d(t,{ZK:()=>v,aT:()=>b,u:()=>y});var r=n(82684),i=n(63001),o=n(2739),a=n(53809);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=i.ZP.div.withConfig({displayName:"filterBadge__BaseContainer",componentId:"sc-f9gznr-0"})(["color:#5097BA;cursor:pointer;font-weight:300;padding:0px 2px 0px 2px;"]),h=(0,i.ZP)(u).withConfig({displayName:"filterBadge__TextContainer",componentId:"sc-f9gznr-1"})(["display:inline-block;cursor:help;margin:0px 0px 0px 2px;"]),d=i.ZP.div.withConfig({displayName:"filterBadge__IconContainer",componentId:"sc-f9gznr-2"})(["cursor:pointer;color:#5097BA;border-width:0px 0px 0px 1px;border-style:solid;border-color:#BDD8E5;*/ min-width:20px;padding:0px 1px 0px 5px;display:inline-block;text-align:center;&:hover,&:focus{& > svg{color:#0071e6;}}& > svg{transform:translate(-2px,2px);}"]),p=(0,i.ZP)(u).withConfig({displayName:"filterBadge__UnselectedFilterTextContainer",componentId:"sc-f9gznr-3"})(["margin:1px 2px 1px 2px;padding:0px 2px 0px 2px;&:hover{text-decoration:underline;}"]),f=(0,i.ZP)(u).withConfig({displayName:"filterBadge__SelectedFilterTextContainer",componentId:"sc-f9gznr-4"})(["background-color:#E9F2F6;border-radius:2px;border:1px solid #BDD8E5;border-width:1;border-radius:2px;margin:0px 2px 0px 0px;&:hover{text-decoration:none;}"]),m=i.ZP.div.withConfig({displayName:"filterBadge__BadgeContainer",componentId:"sc-f9gznr-5"})(["background-color:#E9F2F6;",";display:inline-block;font-size:14px;border-radius:2px;border-width:1px;border-style:solid;border-color:#BDD8E5;"],(function(e){return e.striped?"background: repeating-linear-gradient(135deg, #E9F2F6, #E9F2F6 5px, #FFFFFF 5px, #FFFFFF 10px);":""})),g=(0,i.ZP)(a.Z).withConfig({displayName:"filterBadge__StyledTooltip",componentId:"sc-f9gznr-6"})(["max-width:30vh;font-weight:400;white-space:normal;line-height:1.2;padding:4px !important;& > br{margin-bottom:10px;}"]),y=function(e){var t=e.id,n=e.children;return r.createElement(g,{place:"bottom",type:"dark",effect:"solid",delayShow:300,id:t},n)},v=function(e){var t=e.remove,n=e.canMakeInactive,i=e.active,a=e.activate,s=e.inactivate,l=e.children,c=e.id,u=e.onHoverMessage,p=void 0===u?"The visible data is being filtered by this":u;return r.createElement(m,{striped:n&&!i},r.createElement(h,{active:!n||i,"data-tip":!0,"data-for":c},l),r.createElement(y,{id:c},n&&!i?"This filter is currently inactive":p),n&&r.createElement(d,{onClick:i?s:a,role:"button",tabIndex:0,"data-tip":!0,"data-for":c+"active"},i?r.createElement(o.z5B,null):r.createElement(o.tjB,null),r.createElement(y,{id:c+"active"},i?"Inactivate this filter":"Re-activate this filter")),r.createElement(d,{onClick:t,role:"button",tabIndex:0},r.createElement(o.Xm5,{"data-tip":!0,"data-for":c+"remove"}),r.createElement(y,{id:c+"remove"},"Remove this filter")))},b=function(e){var t=e.onClick,n=e.extraStyles,i=void 0===n?{}:n,o=e.active,a=e.children,s=o?f:p;return r.createElement("div",{style:l({display:"inline-block"},i)},r.createElement(s,{onClick:t},a))}},40500:(e,t,n)=>{"use strict";n.d(t,{E:()=>b,Z:()=>w});var r=n(82684),i=n(63001),o=n(4667),a=n(14179),s=n(58852),l=n(12225);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=!1,h=i.ZP.a.withConfig({displayName:"LinkOutModalContents__ButtonText",componentId:"sc-9zdqjf-0"})(["border:1px solid ",";border-radius:4px;cursor:pointer;padding:4px 7px;margin-right:10px;font-family:",";background-color:rgba(0,0,0,0);color:white !important;font-weight:400;text-decoration:none !important;font-size:16px;flex-shrink:0;&:hover{background-color:",";}"],a.XD,a.kU,(function(e){return e.theme.selectedColor})),d=i.ZP.span.withConfig({displayName:"LinkOutModalContents__InactiveButton",componentId:"sc-9zdqjf-1"})(["border:1px solid ",";border-radius:4px;cursor:auto;padding:4px 7px;margin-right:10px;font-family:",";background-color:rgba(0,0,0,0);color:white;font-weight:400;text-decoration:line-through !important;font-size:16px;flex-shrink:0;"],a.XD,a.kU),p=i.ZP.span.withConfig({displayName:"LinkOutModalContents__ButtonDescription",componentId:"sc-9zdqjf-2"})(["display:inline-block;font-style:italic;font-size:14px;color:white;"]),f=i.ZP.div.withConfig({displayName:"LinkOutModalContents__ButtonContainer",componentId:"sc-9zdqjf-3"})(["margin-top:10px;margin-bottom:10px;display:flex;flex-wrap:nowrap;align-items:center;"]);function m(){return{pathname:window.location.pathname,origin:u||window.location.origin}}function g(){var e,t,n="taxonium.org",i=m(),a=i.pathname,s=i.origin,u=(0,o.v9)((function(e){return e.controls})),g=u.distanceMeasure,y=u.colorBy;return u.showTreeToo?r.createElement(f,{key:n},r.createElement(d,null,n),r.createElement(p,null,"The current dataset isn't viewable in taxonium as tanglegrams aren't supported")):r.createElement(f,{key:n},r.createElement(h,{href:(e={treeUrl:"".concat(s).concat(a),treeType:"nextstrain",ladderizeTree:"false",xType:"num_date"===g?"x_time":"x_dist"},t=function(){if((0,l.O$)(y)){var e=['"genotype"'],t=(0,l.kW)(y);return!t||t.positions.length>1?null:(e.push('"pos":'.concat(t.positions[0])),t.aa&&e.push('"gene":"'.concat(t.gene,'"')),'{"field":'.concat(e.join(","),"}"))}return'{"field":"meta_'.concat(y,'"}')}(),t&&(e.color=t),"".concat("https://taxonium.org","?").concat(Object.entries(e).map((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],o=r[1];return"".concat(i,"=").concat(encodeURIComponent(o))})).join("&"))),target:"_blank",rel:"noreferrer noopener"},n),r.createElement(p,null,"Visualise this dataset in Taxonium (",r.createElement("a",{href:"https://docs.taxonium.org/en/latest/",target:"_blank",rel:"noreferrer noopener"},"learn more"),")."))}function y(){var e="microbetrace.cdc.gov",t=m(),n=t.pathname,i=t.origin,a=(0,o.v9)((function(e){return e.controls})).showTreeToo,s=(0,o.v9)((function(e){return e.metadata})).mainTreeNumTips;return a?r.createElement(f,{key:e},r.createElement(d,null,e),r.createElement(p,null,"The current dataset isn't viewable in MicrobeTrace as tanglegrams aren't supported")):r.createElement(f,{key:e},r.createElement(h,{href:"".concat("https://microbetrace.cdc.gov/MicrobeTrace","?url=").concat(encodeURIComponent("".concat(i).concat(n))),target:"_blank",rel:"noreferrer noopener"},e),r.createElement(p,null,"View this data in MicrobeTrace (",r.createElement("a",{href:"https://github.com/CDCgov/MicrobeTrace/wiki",target:"_blank",rel:"noreferrer noopener"},"learn more"),").",s>500&&r.createElement("span",null," Note that trees with over 500 tips may have trouble loading (this one has ".concat(s,")."))))}function v(){var e="nextclade",t=m(),n=t.pathname,i=t.origin,a=(0,o.v9)((function(e){return e.controls})).showTreeToo,s=(0,o.v9)((function(e){return e.metadata})),l=s.mainTreeNumTips,c=s.rootSequence,u=l>4e3;if(a||!c)return r.createElement(f,{key:e},r.createElement(d,null,e),r.createElement(p,null,"The current tree isn't usable as a Nextclade dataset as ".concat(a?"tanglegrams aren't supported.":"this dataset doesn't have a root-sequence (either within the main JSON or as a sidecar JSON).")));var g="https://clades.nextstrain.org?dataset-json-url=".concat(encodeURIComponent("".concat(i).concat(n)));return r.createElement(f,{key:e},r.createElement(h,{href:g,target:"_blank",rel:"noreferrer noopener"},e),r.createElement(p,null,"Use this tree as a nextclade reference dataset which allows you to add new sequences (via drag-and-drop) and see them placed on the tree.\n        Note that manually curated datasets may be better suited to your use case, see ",r.createElement("a",{href:"https://clades.nextstrain.org",target:"_blank",rel:"noreferrer noopener"},"clades.nextstrain.org")," for all reference datasets or read the ",r.createElement("a",{href:"https://docs.nextstrain.org/projects/nextclade/en/stable/user/nextclade-web/index.html",target:"_blank",rel:"noreferrer noopener"},"Nextclade Web documentation")," for more details.",u&&r.createElement("span",null," Note that large trees such as this may not work in Nextclade!")))}var b=function(){return r.createElement(r.Fragment,null,r.createElement("div",{style:a.fu.modalSubheading},"View this dataset on other platforms:"),r.createElement("div",{style:a.fu.break}),r.createElement("p",null,"Clicking on the following links will take you to an external site which will attempt to load the underlying data JSON which you are currently viewing. These sites are not part of Nextstrain and as such are not under our control, but we highly encourage interoperability across platforms like these."),r.createElement("div",{style:{paddingTop:"10px"}}),r.createElement(v,null),r.createElement(g,null),r.createElement(y,null))},w=function(){return u?(console.log("Enabling link-out modal because 'forceLinkOutHost' is set"),!0):!(!(0,s.y)("linkOutModal")||!(0,s.R)("linkOutModal")||("localhost"===window.location.hostname&&console.warn("Link-out modal requested but you are running on localhost so the links will not work"),0))}},48941:(e,t,n)=>{"use strict";n.d(t,{h:()=>h,j:()=>k});var r=n(82684),i=n(63001),o=n(2739),a=n(37275),s=n(56113);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=i.ZP.button.withConfig({displayName:"MutationTable__Button",componentId:"sc-1qenp7x-0"})(["border:0px;background-color:inherit;cursor:pointer;outline:0;text-decoration:underline;font-size:16px;padding:0px 0px;"]),u=function(e,t){var n=[parseInt(e.slice(1,-1),10),parseInt(t.slice(1,-1),10)];return n[0]<n[1]?-1:1},h=function(e){var t=[];return e.sort(u).forEach((function(e,n){var r=parseInt(e.slice(1,-1),10);0===n||r!==t[t.length-1].end+1?t.push({start:r,end:r,count:1,char:e.slice(-1)}):(t[t.length-1].end=r,t[t.length-1].count+=1)})),t},d=i.ZP.p.withConfig({displayName:"MutationTable__Heading",componentId:"sc-1qenp7x-1"})(["margin-top:12px;margin-bottom:4px;"]),p=i.ZP.span.withConfig({displayName:"MutationTable__SubHeading",componentId:"sc-1qenp7x-2"})(["padding-right:8px;"]),f=i.ZP.span.withConfig({displayName:"MutationTable__MutationList",componentId:"sc-1qenp7x-3"})([""]),m=i.ZP.p.withConfig({displayName:"MutationTable__MutationLine",componentId:"sc-1qenp7x-4"})(["margin:0px 0px 4px 0px;font-weight:300;font-size:16px;"]),g=i.ZP.td.withConfig({displayName:"MutationTable__TableFirstColumn",componentId:"sc-1qenp7x-5"})(["font-weight:500;white-space:nowrap;vertical-align:baseline;"]),y=function(e){var t,n,i=e.name,o=e.muts,a=e.displayAsIntervals,s=e.isNuc;if(a){var l=h(o);n="".concat(i," (").concat(l.length," regions, ").concat(o.length).concat(s?"bp":" codons","):"),t=l.map((function(e){return 1===e.count?"".concat(e.start):"".concat(e.start,"..").concat(e.end," (").concat(e.count," ").concat(s?"bp":"codons",")")})).join(", ")}else n="".concat(i," (").concat(o.length,"):"),t=o.sort(u).join(", ");return r.createElement(m,null,r.createElement(p,{key:i},n),r.createElement(f,null,t))},v={unique:"Unique",changes:"Changes",homoplasies:"Homoplasies",reversionsToRoot:"Reversions to root",undeletions:"Undeletions",gaps:"Gaps",ns:"Ns "},b=i.ZP.span.withConfig({displayName:"MutationTable__InfoContainer",componentId:"sc-1qenp7x-6"})(["padding-left:10px;cursor:help;color:#888;"]),w=r.createElement("div",null,"A summary of mutations inferred to have occurred on this branch. Mutations are grouped into one of the following (mutually exclusive) categories, with the first matching category used:",r.createElement("ol",null,r.createElement("li",null,"Undeletions: a change from a '-' character to a base; beware that these are often bioinformatics artifacts"),r.createElement("li",null,"Gaps: A change to a '-' character, indicating a missing base; these can indicate deletions but sometimes areas of no coverage are filled with gaps"),r.createElement("li",null,"Ns: Typically due to lack of sequence coverage or ambiguity at this position (Nucleotides only)"),r.createElement("li",null,"Homoplasies: a mutation that has also been observed elsewhere on the tree"),r.createElement("li",null,"Unique: Mutations which are only observed on this branch")),"Reversions to Root is an additional category which highlights those mutations which return the state to that of the root. Mutations in this category will also appear one of the five categories listed above.",r.createElement("p",null),"Gaps and Ns are grouped into intervals, as they frequently occur in succession. Click below to copy all changes to clipboard to see the full list."),E=r.createElement("div",null,"A summary of sequence changes between the root and the selected tip. Changes are grouped into one of the following (mutually exclusive) categories, with the first matching category used:",r.createElement("ol",null,r.createElement("li",null,"Gaps: A change to a '-' character, indicating a missing base; these can indicate deletions but sometimes areas of no coverage are filled with gaps"),r.createElement("li",null,"Ns: Typically due to lack of sequence coverage or ambiguity at this position (Nucleotides only)"),r.createElement("li",null,"Reversions to root: The tip state is the same as the root state, however this has changed and been reverted along the way"),r.createElement("li",null,"Changes: The tip state differs from the root state")),"Gaps and Ns are grouped into intervals, as they frequently occur in succession. Click below to copy all changes to clipboard to see the full list."),k=function(e){var t=e.node,n=e.geneSortFn,i=e.isTip,h=e.observedMutations,p=i?(0,a.Wf)(t):(0,a.MS)(t,h);return 0===Object.keys(p).length?r.createElement(d,null,i?"No sequence changes observed":"No mutations observed on branch"):r.createElement(r.Fragment,null,r.createElement(d,null,i?"Sequence changes observed (from root)":"Mutations observed on branch",r.createElement(b,{"data-tip":!0,"data-for":"seqChangesInfo"},r.createElement(o.DAO,null))),r.createElement(s.mi,{place:"bottom",type:"light",effect:"solid",id:"seqChangesInfo"},i?E:w),r.createElement("table",null,r.createElement("tbody",null,Object.keys(p).sort(n).map((function(e){return function(e,t){return 0===Object.values(t).filter((function(e){return e.length})).length?null:r.createElement("tr",{key:e},r.createElement(g,null,"nuc"===e?"Nt":e),r.createElement("td",null,Object.entries(v).map((function(n){var i,o,a=(o=2,function(e){if(Array.isArray(e))return e}(i=n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(i,o)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(i,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0],c=a[1];return s in t&&t[s].length?r.createElement(y,{key:c,name:c,muts:t[s],displayAsIntervals:"gaps"===s||"ns"===s||"undeletions"===s,isNuc:"nuc"===e}):null}))))}(e,p[e])})),r.createElement("tr",null,r.createElement("td",null),r.createElement("td",null,r.createElement(c,{onClick:function(){navigator.clipboard.writeText(function(e,t){return Object.keys(e).sort(t).map((function(t){return Object.keys(v).filter((function(n){return n in e[t]&&e[t][n].length})).map((function(n){return"".concat(t,"\t").concat(n,"\t").concat(e[t][n].sort(u).join(", "))}))})).flat().join("\n")}(p,n))}},"Click to copy all ".concat(i?"changes":"mutations"," to clipboard as TSV")))))))}},72640:(e,t,n)=>{"use strict";n.d(t,{Tq:()=>p,ZP:()=>k});var r=n(82684),i=n(70570),o=n(14179),a=n(58640),s=n(37275),l=n(48941),c=n(54710),u=n(38240);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){e||(e=window.event),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},f=function(e,t,n){return r.createElement("tr",{key:e},r.createElement("th",{style:o.fu.item},e),r.createElement("td",{style:o.fu.item},n?r.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},t):t))},m=function(e){var t=e.url,n=e.title,i=e.value;return r.createElement("tr",null,r.createElement("th",{style:o.fu.item},n),r.createElement("td",{style:o.fu.item},r.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},i)))},g=function(e){var t=e.node,n=(0,s.rs)(t,"gisaid_epi_isl"),o=(0,s.rs)(t,"genbank_accession"),a=null,l=null;if((0,i.mg)(n))if(new RegExp("EPI_ISL_[0-9]{5,}").test(n)){var c=n.split("_")[2];a="https://www.epicov.org/acknowledgement/"+c.slice(-4,-2)+"/"+c.slice(-2)+"/"+n+".json"}else a="https://gisaid.org";if((0,i.mg)(o)&&(l="https://www.ncbi.nlm.nih.gov/nuccore/"+o),(0,i.mg)(n)&&(0,i.mg)(o))return r.createElement(r.Fragment,null,r.createElement(m,{title:"GISAID EPI ISL",value:n,url:a}),r.createElement(m,{title:"Genbank accession",value:o,url:l}));if((0,i.mg)(n))return r.createElement(m,{title:"GISAID EPI ISL",value:n,url:a});if((0,i.mg)(o))return r.createElement(m,{title:"Genbank accession",value:o,url:l});var u=(0,s.Bu)(t),h=u.accession,d=u.url;return h&&d?r.createElement(m,{url:d,value:h,title:"Accession"}):h?f("Accession",h):d?r.createElement(m,{title:"Strain URL",url:d,value:"click here"}):null},y=function(e){var t=e.node,n=e.t,i=(0,s.nt)(t);if(!i)return null;var o=[];return i.selection_date&&o.push(r.createElement("tr",{key:"seldate"},r.createElement("th",null,n("Vaccine selected")),r.createElement("td",null,i.selection_date))),i.start_date&&o.push(r.createElement("tr",{key:"startdate"},r.createElement("th",null,n("Vaccine start date")),r.createElement("td",null,i.start_date))),i.end_date&&o.push(r.createElement("tr",{key:"enddate"},r.createElement("th",null,n("Vaccine end date")),r.createElement("td",null,i.end_date))),i.serum&&o.push(r.createElement("tr",{key:"serum"},r.createElement("th",null,n("Serum strain")),r.createElement("td",null))),o},v=function(e){var t=e.node,n=e.t,r=(0,s.ZZ)(t);if(!r)return null;var i=[];return i.push(f(n("Authors"),r.value)),r.title&&"?"!==r.title&&(r.paper_url&&"?"!==r.paper_url?i.push(f(n("Title"),r.title,r.paper_url)):i.push(f(n("Title"),r.title))),r.journal&&"?"!==r.journal&&i.push(f(n("Journal"),r.journal)),1===i.length?i[0]:i},b=function(e){var t=e.children;return r.createElement("p",{style:o.fu.modalHeading},t)},w=function(e){var t=e.isTerminal,n=e.node,i=e.t,o=(0,s.rs)(n,"num_date");if(!o)return null;var l=(0,s.rs)(n,"num_date",{confidence:!0});return o&&l&&l[0]!==l[1]?r.createElement(r.Fragment,null,f(i(t?"Inferred collection date":"Inferred date"),(0,a.hT)(o)),f(i("Date Confidence Interval"),"(".concat((0,a.hT)(l[0]),", ").concat((0,a.hT)(l[1]),")"))):f(i(t?"Collection date":"Inferred date"),(0,a.hT)(o))},E=function(e){var t,n=e.node,o=e.trait,l=e.colorings,c=e.isTerminal,u=(0,s.rs)(n,o),h=(0,s.rs)(n,o,{confidence:!0}),d="temporal"===(null===(t=l[o])||void 0===t?void 0:t.type);if("number"!=typeof u||d||Number.isInteger(u)||(u=Number.parseFloat(u).toPrecision(3)),!(0,i.mg)(u))return null;h&&u in h&&(!c||h[u]<.99)&&(u="".concat(u," (").concat((100*h[u]).toFixed(0),"%)"));var p=l&&l[o]&&l[o].title?l[o].title:o;if(d&&"number"==typeof u)return f(p,(0,a.hT)(u));var g=(0,s.eD)(n,o);return g?r.createElement(m,{title:p,url:g,value:u}):f(p,u)};const k=function(e){var t,n=e.selectedNode,a=e.nodesLhsTree,s=e.nodesRhsTree,m=e.clearSelectedNode,k=e.colorings,x=e.observedMutations,S=e.geneSortFn,T=e.tipLabelKey,C=e.t;if(!n)return null;var O=null===(t=n.treeId===c.QD?a:s)||void 0===t?void 0:t[n.idx];if(!O)return console.error("Internal error retrieving selected node"),null;var _=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o.fu.panel);_.maxHeight="70%";var j=!O.hasChildren,L=!n.isBranch,I=T!==i.Ac||!j;return r.createElement("div",{style:o.fu.modalContainer,onClick:function(){return m(n)}},r.createElement("div",{className:"panel",style:_,onClick:function(e){return p(e)}},r.createElement(b,null,(0,u.A)(C,O,T,!L)),r.createElement("table",null,r.createElement("tbody",null,!j&&f(C("Number of terminal tips"),O.fullTipCount),I&&f(C("Node name"),O.name),L&&r.createElement(y,{node:O,t:C}),r.createElement(w,{isTerminal:j,node:O,t:C}),L&&r.createElement(v,{node:O,t:C}),function(e){if(!e.node_attrs)return[];var t=["author","div","num_date","gisaid_epi_isl","genbank_accession","accession","url"];return Object.keys(e.node_attrs).filter((function(e){return!t.includes(e)}))}(O).map((function(e){return r.createElement(E,{node:O,trait:e,colorings:k,key:e,isTerminal:j})})),L&&r.createElement(g,{node:O}),f("",""))),r.createElement(l.j,{node:O,geneSortFn:S,isTip:L,observedMutations:x}),r.createElement("p",{style:o.fu.comment},C("Click outside this box to go back to the tree"))))}},38240:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(37275),i=n(58640);function o(e,t,n,o){var a=(0,r.rs)(t,n);"num_date"===n&&a&&(a=(0,i.hT)(a));var s=!t.hasChildren;return o?s?a?e("Branch leading to {{tipLabel}}",{tipLabel:a}):e("Terminal branch"):e("Internal branch"):a}},87040:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C,m:()=>g});var r=n(82684),i=n(14179),o=n(58640),a=n(9045),s=n(12225),l=n(37275),c=n(70570),u=n(69446),h=n(48941),d=n(38240);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=function(e){var t=e.name,n=e.value,i=e.padBelow,o=void 0!==i&&i;return r.createElement("div",{style:{paddingBottom:o?"15px":"10px"},key:t},r.createElement("span",{style:{fontWeight:"500"}},t+" "),n||0===n?Array.isArray(n)?n.map((function(e){return r.createElement("div",{key:e,style:{fontWeight:"300",marginLeft:"0em"}},e)})):r.createElement("span",{style:{fontWeight:"300"}},n):null)},y=function(e){var t=e.node,n=e.t,i=[],a=(0,l.KT)(t),s=(0,l.rs)(t,"num_date");if(a&&i.push(r.createElement(g,{name:n("Divergence")+":",value:(0,u.dX)(a),key:"div"})),void 0!==s){var c=(0,o.hT)(s),h=(0,l.rs)(t,"num_date",{confidence:!0});if(h&&h[0]!==h[1]){i.push(r.createElement(g,{name:n("Inferred Date")+":",value:c,key:"inferredDate"}));var d=[(0,o.hT)(h[0]),(0,o.hT)(h[1])];d[0]!==d[1]&&i.push(r.createElement(g,{name:n("Date Confidence Interval")+":",value:"(".concat(d[0],", ").concat(d[1],")"),key:"dateConf"}))}else i.push(r.createElement(g,{name:n("Date")+":",value:c,key:"date"}))}return i},v=function(e){var t=e.node,n=e.colorBy,i=e.colorByConfidence,u=e.colorScale,h=e.colorings;if("num_date"===n)return null;if((0,s.O$)(n)){var d=(0,s.kW)(n),p=d.aa?"Amino Acid at ".concat(d.gene," site ").concat(d.positions.join(", "),":"):"Nucleotide at pos ".concat(d.positions.join(", "),":");return r.createElement(g,{name:p,value:(0,a.BG)(t,u)})}if("author"===n){var f=(0,l.ZZ)(t);return f?r.createElement(r.Fragment,null,f.title?r.createElement(g,{name:"Title:",value:f.title}):null,f.journal?r.createElement(g,{name:"Journal:",value:f.journal}):null):null}var m=h&&h[n]&&h[n].title?h[n].title:n,y=(0,l.rs)(t,n);if("temporal"===u.scaleType&&"number"==typeof y)return r.createElement(g,{name:"".concat(m,":"),value:(0,o.hT)(y)});var v=function(){return(0,c.mg)(y)?r.createElement(g,{name:"".concat(m,":"),value:y}):null};if(!0===i){var b=(0,l.rs)(t,n,{confidence:!0});if(!b)return console.error("couldn't find confidence vals for ",n),null;if(!t.hasChildren&&1===Object.keys(b).length&&Object.values(b)[0]>.99)return v();var w=Object.keys(b).filter((function(e){return(0,c.mg)(e)})).sort((function(e,t){return b[e]>b[t]?-1:1})).slice(0,4).map((function(e){return"".concat(e," (").concat((100*b[e]).toFixed(0),"%)")}));return w.length?r.createElement(g,{name:"".concat(m," (confidence):"),value:w}):null}return v()},b=function(e){var t=e.node,n=e.t,i=(0,l.Wf)(t);if(!i.nuc)return null;var o={changes:0,gaps:0,reversionsToRoot:0,ns:0},a={changes:0,gaps:0,reversionsToRoot:0};Object.keys(i).forEach((function(e){Object.entries(i[e]).forEach((function(t){var n=p(t,2),r=n[0],i=n[1];"nuc"===e?o[r]+=i.length:a[r]+=i.length}))}));var s="".concat(o.changes).concat(o.reversionsToRoot?" + ".concat(o.reversionsToRoot," reversions to root"):"");s+="".concat(o.gaps?" + ".concat(o.gaps," gaps"):"").concat(o.nt?" + ".concat(o.nt," Ns"):"");var c="".concat(a.changes).concat(a.reversionsToRoot?" + ".concat(a.reversionsToRoot," reversions to root"):"");return c+="".concat(a.gaps?" + ".concat(a.gaps," gaps"):""),[r.createElement(g,{name:n("Nucleotide changes")+":",value:s,key:"nuc"}),r.createElement(g,{name:n("Amino Acid changes")+":",value:c,key:"aa"})]},w=function(e){var t=e.node,n=e.geneSortFn,i=e.observedMutations,o=e.t;if(!t.branch_attrs||!t.branch_attrs.mutations)return null;var a=[],s=t.branch_attrs.mutations,c=(0,l.MS)(t,i),u=function(e,t){return e.slice(0,Math.min(t,e.length)).join(", ")+(e.length>t?" + ".concat(e.length-t," more"):"")};if(c.nuc){if(c.nuc.unique.length&&a.push(r.createElement(g,{name:"Unique Nucleotide mutations:",value:u(c.nuc.unique,5),key:"nuc_unique"})),c.nuc.homoplasies.length&&a.push(r.createElement(g,{name:"Homoplasic mutations:",value:u(c.nuc.homoplasies,5),key:"nuc_homoplasies"})),c.nuc.reversionsToRoot.length&&a.push(r.createElement(g,{name:"Reversions to Root:",value:c.nuc.reversionsToRoot.length,key:"nuc_rtr"})),c.nuc.gaps.length){var d="".concat((0,h.h)(c.nuc.gaps).length," regions, ").concat(c.nuc.gaps.length,"bp.");a.push(r.createElement(g,{name:"Gaps:",value:d,key:"nuc_gaps"}))}if(c.nuc.undeletions.length){var p="".concat((0,h.h)(c.nuc.undeletions).length," regions, ").concat(c.nuc.undeletions.length,"bp.");a.push(r.createElement(g,{name:"Undeletions:",value:p,key:"nuc_undeletions"}))}if(c.nuc.ns.length){var m="".concat((0,h.h)(c.nuc.ns).length," regions, ").concat(c.nuc.ns.length,"bp.");a.push(r.createElement(g,{name:"Ns:",value:m,key:"nuc_ns"}))}}else a.push(r.createElement(g,{name:o("No nucleotide mutations"),value:"",key:"nuc"}));var y,v=Object.keys(s).sort(n).filter((function(e){return"nuc"!==e})),b={},w=!1,E=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=f(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(v);try{for(E.s();!(y=E.n()).done;){var k=y.value,x=s[k].filter((function(e){return!e.endsWith("X")}));x.length&&(b[k]=x,w=!0)}}catch(e){E.e(e)}finally{E.f()}if(w){var S=[];Object.keys(b).forEach((function(e,t){if(t<7){var n=e+":"+b[e].slice(0,Math.min(3,b[e].length)).join(", ");b[e].length>3&&(n+=" + "+o("{{x}} more",{x:b[e].length-3})),S.push(n)}else 7===t&&S.push("(".concat(o("protein mutations truncated"),")"))})),a.push(r.createElement(g,{name:o("AA mutations")+":",value:S,key:"aa"}))}else s.nuc&&s.nuc.length&&a.push(r.createElement(g,{name:o("No amino acid mutations"),key:"aa"}));return a},E=function(e){var t=e.node,n=e.t,i=e.tipLabelKey,o=p(1===t.fullTipCount?[(0,d.A)(n,t,i,!0),""]:[n("Number of descendants")+":",t.fullTipCount],2),a=o[0],s=o[1];return r.createElement(g,{name:a,value:s,padBelow:!0})},k=function(e){var t=e.node,n=e.t,i=(0,l.nt)(t);if(!i)return null;var o=[];return i.selection_date&&o.push(r.createElement(g,{name:n("Vaccine selected")+":",value:i.selection_date,key:"seldate"})),i.start_date&&o.push(r.createElement(g,{name:n("Vaccine start date")+":",value:i.start_date,key:"startdate"})),i.end_date&&o.push(r.createElement(g,{name:n("Vaccine end date")+":",value:i.end_date,key:"enddate"})),i.serum&&o.push(r.createElement(g,{name:n("Serum strain"),key:"serum"})),o},x=function(e){var t=e.node,n=[],i=(0,l.ZZ)(t);i&&n.push(r.createElement(g,{name:"Author:",value:i.value,key:"author"}));var o=(0,l.rs)(t,"gisaid_epi_isl");if((0,c.mg)(o)){var a=o.split("_")[2];n.push(r.createElement(g,{name:"GISAID EPI ISL:",value:a,key:"gisaid_epi_isl"}))}return n},S=function(e){var t,n=e.node,o=e.panelDims,a=e.children;t=o.width<420?200:o.width<460?220:o.width<500?240:o.width<540?260:280;var s=-1===n.shell.that.params.orientation[0]?o.width/2+o.spaceBetweenTrees+n.shell.xTip:n.shell.xTip,l=n.shell.yTip,c={container:{position:"absolute",width:t,padding:"10px",borderRadius:10,zIndex:1e3,pointerEvents:"none",fontFamily:i.fu.panel.fontFamily,fontSize:14,lineHeight:1,fontWeight:i.fu.panel.fontWeight,color:i.fu.panel.color,backgroundColor:i.fu.panel.backgroundColor,wordWrap:"break-word",wordBreak:"break-word"}};return s<.5*o.width?c.container.left=s+10:c.container.right=o.width-s+10,l<.55*o.height?c.container.top=l+40:c.container.bottom=o.height-l+10,r.createElement("div",{style:c.container},r.createElement("div",{className:"tooltip",style:i.fu.tooltip},a))},T=function(e){var t=e.children;return r.createElement("div",{style:i.fu.comment},t)};const C=function(e){var t=e.selectedNode,n=e.colorBy,o=e.colorByConfidence,a=e.colorScale,s=e.panelDims,l=e.colorings,h=e.geneSortFn,p=e.observedMutations,f=e.tipLabelKey,m=e.t;if(!t)return null;var C=t.node.n,O=(0,u.uN)(C);return r.createElement(S,{node:C,panelDims:s},!1===t.isBranch?r.createElement(r.Fragment,null,r.createElement("div",{style:i.fu.tooltipHeading},(0,d.A)(m,C,f,!1)),f!==c.Ac&&r.createElement(g,{name:"Node name:",value:C.name}),r.createElement(k,{node:C,t:m}),r.createElement(b,{node:C,t:m}),r.createElement(y,{node:C,t:m}),r.createElement(v,{node:C,colorBy:n,colorByConfidence:o,colorScale:a,colorings:l}),r.createElement(x,{node:C}),r.createElement(T,null,m("Click on tip to display more info"))):r.createElement(r.Fragment,null,r.createElement(E,{node:C,t:m,tipLabelKey:f}),r.createElement(w,{node:C,geneSortFn:h,observedMutations:p,t:m}),r.createElement(y,{node:C,t:m}),r.createElement(v,{node:C,colorBy:n,colorByConfidence:o,colorScale:a,colorings:l}),r.createElement(T,null,O===C.arrayIdx?m("Click to zoom out to parent clade"):m("Click to zoom into clade")),r.createElement(T,null,m("Shift + Click to display more info"))))}},14866:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(82684),i=n(4667),o=n(76367),a=n(397),s=n(14179);const l=function(e){var t=e.dispatch,n=e.transform,i=e.clipId,o=e.legendRectSize,l=e.legendSpacing,c=e.rectStroke,u=e.rectFill,h=e.label,d=e.value;return r.createElement("g",{transform:n,onMouseEnter:function(){t((0,a.VB)({selectedLegendItem:d}))},onMouseLeave:function(){t((0,a.VB)())}},r.createElement("rect",{style:{strokeWidth:2},width:o,height:o,fill:u,stroke:c}),r.createElement("text",{x:o+l+5,y:o-l,style:{fontSize:12,fill:s.I6,fontFamily:s.kU},clipPath:i?"url(#".concat(i,")"):void 0},r.createElement("title",null,h),h))};var c,u=n(70570),h=n(9045),d=n(58640),p=n(15742);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}const b=(0,i.$j)((function(e){return{colorBy:e.controls.colorBy,colorings:e.metadata.colorings,colorScale:e.controls.colorScale,legendOpen:e.controls.legendOpen}}))(c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(b,e);var t,n,i,a,c=(i=b,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(i);if(a){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function b(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),c.call(this,e)}return t=b,(n=[{key:"showLegend",value:function(){return void 0!==this.props.legendOpen?this.props.legendOpen:!(this.props.width<600||this.props.colorScale.visibleLegendValues.length>32)}},{key:"getSVGHeight",value:function(){if(!this.showLegend())return 18;var e=this.props.colorScale.visibleLegendValues.length;return 19*Math.ceil(e/2)+4+20||100}},{key:"getSVGWidth",value:function(){return this.showLegend()?290:this.getTitleWidth()+20}},{key:"getTransformationForLegendItem",value:function(e,t){var n=Math.floor(t/e),r=t%e*19;return"translate(".concat(145*n+10,",").concat(r,")")}},{key:"getTitleWidth",value:function(){return 15+5.3*(0,h.Jp)(this.props.colorings,this.props.colorBy).length}},{key:"toggleLegend",value:function(){this.props.dispatch({type:p.Nn,value:!this.props.legendOpen})}},{key:"legendTitle",value:function(){return r.createElement("g",{id:"Title"},r.createElement("rect",{width:this.getTitleWidth(),height:"12",fill:"rgba(255,255,255,.85)"}),r.createElement("text",{x:this.getTitleOffset(),y:10,style:{fontSize:12,fill:s.I6,fontFamily:s.Cc,backgroundColor:"#fff"}},(0,h.Jp)(this.props.colorings,this.props.colorBy)))}},{key:"legendChevron",value:function(){var e=this.showLegend()?-180:0,t=this.getArrowOffset();return r.createElement("g",{id:"Chevron",transform:"translate(".concat(t,",0)")},r.createElement("svg",{width:"12",height:"12",viewBox:"0 0 1792 1792"},r.createElement("rect",{width:"1792",height:"1792",fill:"rgba(255,255,255,.85)"}),r.createElement("path",{fill:s.I6,style:{transform:"rotate(".concat(e,"deg)"),transformOrigin:"50% 50%",transition:"".concat(u.SM,"ms ease-in-out")},d:"M1683 808l-742 741q-19 19-45 19t-45-19l-742-741q-19-19-19-45.5t19-45.5l166-165q19-19 45-19t45 19l531 531 531-531q19-19 45-19t45 19l166 165q19 19 19 45.5t-19 45.5z"})))}},{key:"styleLabelText",value:function(e){if(this.props.colorScale.legendLabels&&this.props.colorScale.legendLabels.has(e))return this.props.colorScale.legendLabels.get(e);if("num_date"===this.props.colorBy||"temporal"===this.props.colorScale.scaleType){var t=this.props.colorScale.visibleLegendValues;if(t[t.length-1]-t[0]>10&&t[t.length-1]-parseInt(e,10)>=10)return parseInt(e,10);var n=(o=(0,d.hT)(e).split("-"),a=3,function(e){if(Array.isArray(e))return e}(o)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(o,a)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(o,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],i=n[1];return n[2],"".concat(u.e7[i]," ").concat(r)}var o,a;return e}},{key:"legendItems",value:function(){var e=this,t=this.props.colorScale.visibleLegendValues,n=Math.ceil(t.length/2),i=t.filter((function(e){return void 0!==e})).map((function(t,i){return r.createElement(l,{dispatch:e.props.dispatch,legendRectSize:15,legendSpacing:4,rectFill:(0,h.m6)(e.props.colorScale.scale(t)),rectStroke:(0,o.B8)(e.props.colorScale.scale(t)).toString(),transform:e.getTransformationForLegendItem(n,i),key:e.props.colorScale.colorBy+t+i,value:t,label:e.styleLabelText(t),index:i,clipId:i<n?"legendFirstColumnClip":void 0})}));return r.createElement("g",{id:"ItemsContainer"},r.createElement("rect",{width:this.getSVGWidth(),height:this.getSVGHeight(),fill:"rgba(255,255,255,.85)"}),r.createElement("clipPath",{id:"legendFirstColumnClip"},r.createElement("rect",{x:"0",y:"0",width:140,height:this.getSVGHeight(),fill:"rgb(150, 154, 223)"})),r.createElement("g",{id:"Items",transform:"translate(0,20)"},i))}},{key:"getContainerStyles",value:function(){var e={position:"absolute",top:26,borderRadius:4,zIndex:1e3,userSelect:"none"};return e[this.props.right?"right":"left"]=5,e}},{key:"getArrowOffset",value:function(){return this.props.right?this.getSVGWidth()-20:this.getTitleWidth()}},{key:"getTitleOffset",value:function(){return this.props.right?this.getSVGWidth()-this.getTitleWidth()-15:5}},{key:"render",value:function(){var e=this;return this.props.colorScale?r.createElement("svg",{id:"TreeLegendContainer",width:this.getSVGWidth(),height:this.getSVGHeight(),style:this.getContainerStyles()},this.legendItems(),r.createElement("g",{id:"TitleAndChevron",onClick:function(){return e.toggleLegend()},style:{cursor:"pointer",textAlign:"right"}},this.legendTitle(),this.legendChevron())):null}}])&&g(t.prototype,n),b}(r.Component))||c},92779:(e,t,n)=>{"use strict";n.d(t,{Et:()=>m,Nf:()=>g,Rw:()=>f,f7:()=>d,i_:()=>y});var r=n(84055),i=n(74001),o=n(2955),a=n(92173),s=(n(91204),n(70570)),l=n(69446),c=n(58640);function u(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(){"majorGrid"in this.groups&&this.groups.majorGrid.selectAll("*").style("visibility","hidden"),"minorGrid"in this.groups&&this.groups.minorGrid.selectAll("*").style("visibility","hidden"),"gridText"in this.groups&&this.groups.gridText.selectAll("*").style("visibility","hidden"),"axisText"in this.groups&&this.groups.axisText.selectAll("*").style("visibility","hidden")},p=function(e,t,n,r,i){for(var o=[],a=[],s=function(e,t){var n=Math.floor(Math.log10(e)),r=Math.pow(10,n);e/r<2?r/=5:e/r<5&&(r/=2);var i=t;return 5!==r&&10!==r||(i=5),{majorStep:r,minorStep:r/i}}(t-e,r),l=s.majorStep,c=s.minorStep,u=Math.floor(e/l)*l,h="radial"===n?e:u,d=t,p=0;p<=(t-u)/l+3;p++){var f=u+l*p;o.push({position:f,name:f.toFixed(Math.max(0,-Math.floor(Math.log10(l)))),visibility:f<h||f>d?"hidden":"visible",axis:i});for(var m=f+c;m<f+l&&m<t;m+=c)a.push({position:m,visibility:m<h||m>d+c?"hidden":"visible",axis:i})}return{majorGridPoints:o,minorGridPoints:a}},f=function(e,t,n,r){for(var i=[],o=[],a=function(e,t){var n={unit:"DAY",n:1},r={unit:"DAY",n:0},i=t<1e3?130:180,o=e/Math.floor(t/i),a={CENTURY:{t:100,max:void 0},DECADE:{t:10,max:5},FIVEYEAR:{t:5,max:1},YEAR:{t:1,max:3},MONTH:{t:1/12,max:6},WEEK:{t:1/52,max:1},DAY:{t:1/365,max:3}},s=Object.keys(a);n.unit="DAY";for(var l=0;l<s.length-1;l++)if(o>a[s[l]].t){n.unit=s[l];break}n.n=Math.floor(o/a[n.unit].t)||1,a[n.unit].max&&n.n>a[n.unit].max&&(n.unit=s[s.indexOf(n.unit)-1],n.n=Math.floor(o/a[n.unit].t)||1),n.n>1||"DAY"===n.unit?r.unit=n.unit:r.unit=s[s.indexOf(n.unit)+1];var c=n.n*a[n.unit].t;return r.n=Math.ceil(a[r.unit].t/c),{majorStep:n,minorStep:r}}(t-e,Math.abs(n)),s=a.majorStep,l=a.minorStep,u=(0,c.OO)(s.unit,(0,c.vA)(t)),h=(0,c.c8)(s.unit,(0,c.vA)(e));h<u;){i.push({date:h,position:(0,c.O$)((0,c.UW)(h)),name:(0,c.ti)(s.unit,h),visibility:"visible",axis:r});for(var d=0;d<s.n;d++)h=(0,c.OO)(s.unit,h)}return l.n&&i.forEach((function(e,t){h=(0,c.OO)(l.unit,e.date);for(var n=0;n<l.n-1;n++)h=(0,c.OO)(l.unit,h);for(var a=t===i.length-1?u:i[t+1].date;h<a;){o.push({position:(0,c.O$)((0,c.UW)(h)),visibility:"visible",axis:r});for(var s=0;s<l.n;s++)h=(0,c.OO)(l.unit,h)}})),{majorGridPoints:i,minorGridPoints:o}},m=function(){var e,t,n=this.layout;if(e=this.groups,t=this.svg,"temporalWindow"in e||(e.temporalWindow=t.append("g").attr("id","temporalWindow"),e.temporalWindowStart=e.temporalWindow.append("rect").attr("class","temporalWindowStart"),e.temporalWindowEnd=e.temporalWindow.append("rect").attr("class","temporalWindowEnd")),"majorGrid"in e||(e.majorGrid=t.append("g").attr("id","majorGrid").attr("clip-path","url(#treeClip)")),"minorGrid"in e||(e.minorGrid=t.append("g").attr("id","minorGrid").attr("clip-path","url(#treeClip)")),"gridText"in e||(e.gridText=t.append("g").attr("id","gridText")),"axisText"in e||(e.axisText=t.append("g").attr("id","axisText")),"unrooted"!==n){var o,a,s,c=(0,r.Z)(this.yScale.domain()),h=(0,i.Z)(this.yScale.domain()),d="radial"===n?this.nodes[0].depth:this.xScale.domain()[0],m="radial"===n?d+(0,i.Z)([this.xScale.domain()[1],this.yScale.domain()[1],-this.xScale.domain()[0],-this.yScale.domain()[0]]):this.xScale.domain()[1],g=this.xScale.range()[1]-this.xScale.range()[0],y="scatter"===this.layout&&"num_date"===this.scatterVariables.x||"clock"===this.layout||"scatter"!==this.layout&&"num_date"===this.distance?f(d,m,g,"x"):"scatter"!==this.layout||this.scatterVariables.xContinuous?p(d,m,n,this.params.minorTicks,"x"):{majorGridPoints:this.xScale.domain().map((function(e){return{name:e,visibility:"visible",axis:"x",position:e}})),minorGridPoints:[]},v=y.majorGridPoints,b=y.minorGridPoints,w=function(e,t,n){return function(r){var i="";if("x"===r.axis){if("rect"===n||"clock"===n||"scatter"===n){var o=e(r.position);i="M"+o.toString()+" "+t.range()[1].toString()+" L "+o.toString()+" "+t.range()[0].toString()}else if("radial"===n){var a=r.position-d,s=e(Math.max(a,0));i="M "+s.toString()+"  "+t(0).toString()+" A "+(s-e(0)).toString()+" "+(t(r.position)-t(d)).toString()+" 0 1 0 "+s.toString()+" "+(t(0)+.001).toString()}}else if("y"===r.axis){var l=t(r.position);i="M".concat(e(d)+20," ").concat(l," L ").concat(e(m)," ").concat(l)}return i}};if("clock"===this.layout||"scatter"===this.layout)if("scatter"===this.layout&&"num_date"===this.scatterVariables.y){var E=this.yScale.range()[1]-this.yScale.range()[0],k=f(c,h,E,"y");v.push.apply(v,u(k.majorGridPoints))}else if("scatter"!==this.layout||this.scatterVariables.yContinuous){var x=p(c,h,n,1,"y");v.push.apply(v,u(x.majorGridPoints))}else v.push.apply(v,u(this.yScale.domain().map((function(e){return{name:e,visibility:"visible",axis:"y",position:e}}))));this.groups.majorGrid.selectAll("*").remove(),this.groups.majorGrid.selectAll(".majorGrid").data(v).enter().append("path").attr("d",w(this.xScale,this.yScale,n)).attr("class","majorGrid").style("fill","none").style("visibility",(function(e){return e.visibility})).style("stroke",this.params.majorGridStroke).style("stroke-width",this.params.majorGridWidth),this.groups.minorGrid.selectAll("*").remove(),this.svg.selectAll(".minorGrid").remove(),this.groups.minorGrid.selectAll(".minorGrid").data(b).enter().append("path").attr("d",w(this.xScale,this.yScale,n)).attr("class","minorGrid").style("fill","none").style("visibility",(function(e){return e.visibility})).style("stroke",this.params.minorGridStroke).style("stroke-width",this.params.minorGridWidth),this.groups.gridText.selectAll("*").remove(),this.svg.selectAll(".gridText").remove(),this.groups.gridText.selectAll(".gridText").data(v).enter().append("text").text((function(e){return e.name})).attr("class","gridText").style("font-size",this.params.tickLabelSize).style("font-family",this.params.fontFamily).style("fill",this.params.tickLabelFill).style("text-anchor",(o=n,function(e){return"x"===e.axis?"radial"===o?"end":"middle":"start"})).style("visibility",(function(e){return e.visibility})).attr("x",function(e,t){return function(n){return"x"===n.axis?e("radial"===t?0:n.position):e.range()[0]-15}}(this.xScale,n)).attr("y",function(e,t){return function(n){if("x"===n.axis){var r=n.position-d;return"radial"===t?e(Math.max(r,0))-5:e.range()[1]+18}return e(n.position)}}(this.yScale,n)),this.groups.axisText.selectAll("*").remove(),this.svg.selectAll(".axisText").remove(),"clock"===n?(s="Date",a=(0,l.jP)(this.yScale)?"Divergence":"Mutations"):"scatter"===n?("div"===(s=this.scatterVariables.xLabel)&&(s=(0,l.jP)(this.xScale)?"Divergence":"Mutations"),"div"===(a=this.scatterVariables.yLabel)&&(a=(0,l.jP)(this.yScale)?"Divergence":"Mutations")):"rect"===n&&(s="num_date"===this.distance?"Date":(0,l.jP)(this.xScale)?"Divergence":"Mutations"),s&&this.groups.axisText.append("text").text(s).attr("class","gridText").style("font-size",this.params.tickLabelSize).style("font-family",this.params.fontFamily).style("fill",this.params.tickLabelFill).style("text-anchor","middle").attr("x",Math.abs(this.xScale.range()[1]-this.xScale.range()[0])/2).attr("y",parseInt(this.svg.attr("height"),10)-1),a&&this.groups.axisText.append("text").text(a).attr("class","gridText").style("font-size",this.params.tickLabelSize).style("font-family",this.params.fontFamily).style("fill",this.params.tickLabelFill).style("text-anchor","middle").attr("transform","translate(10,"+this.yScale.range()[1]/2+") rotate(-90)"),this.grid=!0}},g=function(){this.groups.temporalWindowStart.attr("opacity",0),this.groups.temporalWindowEnd.attr("opacity",0)},y=((0,o.eR)("temporalWindowTransition").duration(s.VC).ease(a.G),function(){if("rect"===this.layout&&"num_date"===this.distance){var e=[this.xScale(this.dateRange[0]),this.xScale(this.dateRange[1])],t=this.yScale.range()[1],n="#EEE",r=-1===this.params.orientation[0],i=this.xScale(this.nodes[0].x),o=r?this.xScale.range()[0]:this.xScale.range()[1];if(o+=this.margins.left+this.margins.right,Math.abs(e[0]-i)>30){var a=e[0],s=0;r&&(a=o-e[0],s=e[0]);var l="1"===this.groups.temporalWindowStart.attr("opacity");this.groups.temporalWindowStart.attr("opacity",1).attr("height",t).attr("transform","translate(".concat(s,",0)")).attr("fill",n),l?this.groups.temporalWindowStart.transition("temporalWindowTransition").attr("width",a):this.groups.temporalWindowStart.attr("width",a)}else this.groups.temporalWindowStart.attr("opacity",0);var c=e[1],u=o-this.margins.right-e[1],h="translate(".concat(o-this.margins.right,",0) scale(-1,1)");if(r&&(c=this.margins.right,u=e[1]-this.margins.right,h="translate(".concat(c,",0)")),u>30){var d="1"===this.groups.temporalWindowEnd.attr("opacity");this.groups.temporalWindowEnd.attr("opacity",1).attr("height",t).attr("fill",n).attr("transform",h),d?this.groups.temporalWindowEnd.transition("temporalWindowTransition").attr("width",u):this.groups.temporalWindowEnd.attr("width",u)}else this.groups.temporalWindowEnd.attr("opacity",0)}else this.hideTemporalSlice()})},54710:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>Pe,QD:()=>Le,yY:()=>je});var r=n(82684),i=n(26439),o=n(2739),a=n(397),s=n(87899),l=n(14866),c=n(14179),u=n(58993),h=n(69446),d=function(e){return 1===e["stroke-width"]?0:e["stroke-width"]>6?e["stroke-width"]+6:2*e["stroke-width"]},p=(n(91204),n(70570)),f=n(5302),m=n(9045);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){var t=e.n.node_attrs&&e.n.node_attrs.hidden;return t&&("always"===t||"timetree"===t&&"num_date"===e.that.distance||"divtree"===t&&"div"===e.that.distance)?"hidden":"visible"},k=function(e,t){return e.branchStroke},x=function(e,t,n){if(e){var r=e.that.svg.select("#"+(0,h.yQ)("branchT",e.n.name));r.empty()||r.style("stroke",n);var i=e.that.svg.select("#"+(0,h.yQ)("branchS",e.n.name));i.empty()||i.style("stroke",n)}},S=n(47843),T=n(58640),C=n(37275),O=function(e){return"aa"===e?"10px":"14px"},_=function(e){return"aa"===e?"500":"700"},j=function(e,t,n,r){return function(n){return t?"visible":n.visibility!==p.m7?"hidden":n.n.tipCount>.03*r?"visible":"aa"===e||n.n.name!==n.n.parent.name&&"__ROOT"!==n.n.parent.name?"hidden":"visible"}},L=function(e){return"num_date"===e?function(e){return(0,T.ti)("DAY",(0,T.vA)((0,C.rs)(e.n,"num_date")))}:function(t){return(0,C.rs)(t.n,e)}};function I(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var R={attrs:{".tip":{r:function(e){return e.r},cx:function(e){return e.xTip},cy:function(e){return e.yTip}},".branch":{},".vaccineCross":{d:function(e){return e.vaccineCross}},".conf":{d:function(e){return e.confLine}}},styles:{".tip":{fill:function(e){return e.fill},stroke:function(e){return e.tipStroke},visibility:function(e){return e.visibility===p.m7?"visible":"hidden"}},".conf":{stroke:function(e){return e.branchStroke},"stroke-width":d},".branch":{"stroke-width":function(e){return e["stroke-width"]+"px"},stroke:function(e){return k(e)},cursor:function(e){return e.visibility===p.m7?"pointer":"default"},visibility:E}}};function N(e,t){return function(n){R.attrs[e]&&I(t).filter((function(t){return R.attrs[e][t]})).forEach((function(t){n.attr(t,R.attrs[e][t])})),R.styles[e]&&I(t).filter((function(t){return R.styles[e][t]})).forEach((function(t){n.style(t,R.styles[e][t])}))}}var A=function(e,t,n,r){e.selectAll(t).filter((function(e){return e.update})).transition().duration(r).call(n),r||(0,u.R8)()},B=n(86491);function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||F(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=F(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function F(e,t){if(e){if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=function e(t,n){var r=t.depth-t.pDepth;t.x=t.px+r*Math.cos(t.tau+.5*t.w),t.y=t.py+r*Math.sin(t.tau+.5*t.w);var i=t.tau;if(t.n.hasChildren)for(var o=0;o<t.n.children.length;o++){var a=t.n.children[o].shell;a.w=2*Math.PI*H(a.n)/n,a.tau=i,i+=a.w,a.px=t.x,a.py=t.y,e(a,n)}};function q(e,t){return t.step()>50?t.padding(.5):e.length<=4?t.padding(.4):e.length<=6?t.padding(.3):e.length<=10?t.padding(.2):t.padding(.1)}function U(e,t,n){var r=t.step();if(!(t.step()<=50)){for(var i=[],o=100;o--;)i.push((Math.random()-.5)*r*.5);var a=["".concat(e,"Base"),"".concat(e,"Tip"),i.length],s=a[0],l=a[1],c=a[2],u=0;!function e(t){if(t[s]=(0,h.Fw)(t.n).shell[l],t[l]+=i[u++],u>=c&&(u=0),t.n.hasChildren){var n,r=D(t.n.children);try{for(r.s();!(n=r.n()).done;)e(n.value.shell)}catch(e){r.e(e)}finally{r.f()}}}(n[0])}}function Z(e,t){var n=0;if(t.length<e.tipLabelBreakL1){var r=e.tipLabelFontSizeL1;t.length<e.tipLabelBreakL2&&(r=e.tipLabelFontSizeL2),t.length<e.tipLabelBreakL3&&(r=e.tipLabelFontSizeL3),t.forEach((function(e){n<e.n.name.length&&(n=.65*e.n.name.length*r)}))}return n}function H(e){return e.tipCount+.15*(e.fullTipCount-e.tipCount)}var K=n(92779),J=function(e,t,n){var r=this;this.grid=!1,this.attributes=["r","cx","cy","id","class","d"],this.params={regressionStroke:c.I6,regressionWidth:6,majorGridStroke:"#DDD",majorGridWidth:2,minorGridStroke:"#EEE",minorGridWidth:1,tickLabelSize:12,tickLabelFill:c.I6,minorTicks:4,orientation:[1,1],showGrid:!0,fillSelected:"#A73",radiusSelected:5,branchStroke:"#AAA",branchStrokeWidth:2,tipStroke:"#AAA",tipFill:"#CCC",tipStrokeWidth:1,tipRadius:4,fontFamily:c.kU,branchLabelKey:!1,branchLabelFont:c.kU,branchLabelFill:"#777",branchLabelFontWeight:500,branchLabelPadX:8,branchLabelPadY:5,tipLabels:!0,tipLabelFont:c.kU,tipLabelFill:"#555",tipLabelPadX:8,tipLabelPadY:2,mapToScreenDebounceTime:500,tipLabelFontSizeL1:8,tipLabelFontSizeL2:10,tipLabelFontSizeL3:12,tipLabelBreakL1:75,tipLabelBreakL2:50,tipLabelBreakL3:25},this.groups={},this.id=t,this.nodes=e.map((function(e){var t={that:r,n:e,x:0,y:0,inView:void 0===e.inView||e.inView};return e.shell=t,t})),this.zoomNode=this.nodes[n],this.strainToNode={},this.nodes.forEach((function(e){r.strainToNode[e.n.name]=e}))};J.prototype.change=function(e){var t,n,r=e.changeColorBy,i=void 0!==r&&r,o=e.changeVisibility,a=void 0!==o&&o,s=e.changeTipRadii,l=void 0!==s&&s,c=e.changeBranchThickness,u=void 0!==c&&c,d=e.showConfidences,p=void 0!==d&&d,f=e.removeConfidences,m=void 0!==f&&f,g=e.zoomIntoClade,y=void 0!==g&&g,v=e.svgHasChangedDimensions,b=void 0!==v&&v,w=e.animationInProgress,E=void 0!==w&&w,k=e.changeNodeOrder,x=void 0!==k&&k,S=e.focus,T=void 0!==S&&S,C=e.newDistance,O=void 0===C?void 0:C,_=e.newLayout,j=void 0===_?void 0:_,I=e.updateLayout,P=void 0===I?void 0:I,R=e.newBranchLabellingKey,N=void 0===R?void 0:R,A=e.showAllBranchLabels,B=void 0===A?void 0:A,M=e.newTipLabelKey,D=void 0===M?void 0:M,F=e.branchStroke,V=void 0===F?void 0:F,z=e.tipStroke,G=void 0===z?void 0:z,W=e.fill,q=void 0===W?void 0:W,U=e.visibility,Z=void 0===U?void 0:U,H=e.tipRadii,K=void 0===H?void 0:H,J=e.branchThickness,Y=void 0===J?void 0:J,$=e.scatterVariables,X=void 0===$?void 0:$,Q=e.performanceFlags,ee=void 0===Q?void 0:Q,te=e.newMeasurementsColorGrouping,ne=void 0===te?void 0:te,re=new Set,ie={},oe=new Set,ae=j,se=500;(Date.now()-this.timeLastRenderRequested<1e3||!0===ee.get("skipTreeAnimation"))&&(se=0),i&&(re.add(".branch").add(".tip").add(".conf"),oe.add("stroke").add("fill"),ie.branchStroke=V,ie.tipStroke=G,ie.fill=q),a&&(re.add(".tip").add(".tipLabel").add(".branchLabel"),oe.add("visibility").add("cursor"),ie.visibility=Z),l&&(re.add(".tip"),oe.add("r"),ie.r=K),u&&(re.add(".branch").add(".conf"),oe.add("stroke-width"),ie["stroke-width"]=Y),(O||j||P||y||b||x)&&(re.add(".tip").add(".branch.S").add(".branch.T").add(".branch"),re.add(".vaccineCross").add(".vaccineDottedLine").add(".conf"),re.add(".branchLabel").add(".tipLabel"),re.add(".grid").add(".regression"),oe.add("cx").add("cy").add("d").add("opacity").add("visibility")),x&&((0,h.Td)({nodes:this.nodes,focus:T}),this.setDistance()),t=this.nodes,n=ie,t.forEach((function(e,t){for(var r in e.update=!1,n){var i=n[r][t];i!==e[r]&&(e[r]=i,e.update=!0)}})),i&&(this.updateColorBy(),this.measurementsColorGrouping=ne),a&&this.regression&&(re.add(".regression"),this.calculateRegression()),y&&(this.nodes.forEach((function(e){e.inView=!1,e.update=!0})),this.zoomNode=y.n.hasChildren?y:y.n.parent.shell,(0,h.Yo)(this.zoomNode,(function(e){e.inView=!0}))),(b||x)&&this.nodes.forEach((function(e){e.update=!0})),(O||P)&&this.setDistance(O),P&&(0,h.Td)({nodes:this.nodes,focus:T}),(O||j||P||x)&&this.setLayout(j||this.layout,X),p&&(this.params.confidence=!0),void 0!==B&&(this.params.showAllBranchLabels=B,re.add(".branchLabel")),(oe.has("stroke-width")||O||j||x||P||y||b||p)&&this.mapToScreen(),D&&(this.callbacks.tipLabel=L(D),re.add(".tipLabel"));var le={removeConfidences:m,showConfidences:p,newBranchLabellingKey:N};le.timeSliceHasPotentiallyChanged=a||void 0!==O,le.hideTipLabels=E||"none"===D,ae?this.modifySVGInStages(re,oe,se,1e3,le):this.modifySVG(re,oe,se,le),this.timeLastRenderRequested=Date.now()},J.prototype.modifySVG=function(e,t,n,r){var i,o=this,a=[".tip",".vaccineDottedLine",".vaccineCross",".branch"];if(e.has(".branch.S")||e.has(".branch.T")){var s=e.has(".branch");s&&a.splice(a.indexOf(".branch"),1),[".S",".T"].forEach((function(r,a){e.has(".branch".concat(r))&&(i=s?function(e){N(".branch",t)(e),e.attr("d",(function(e){return e.branch[a]}))}:function(e){e.attr("d",(function(e){return e.branch[a]}))},A(o.svg,".branch".concat(r),i,n))}))}a.forEach((function(r){e.has(r)&&(i=N(r,t),A(o.svg,r,i,n))})),r.hideTipLabels?this.removeTipLabels():e.has(".tipLabel")&&this.updateTipLabels(),e.has(".grid")&&(this.grid&&"unrooted"!==this.layout?this.addGrid():this.hideGrid()),e.has(".regression")&&(this.removeRegression(),this.regression&&this.drawRegression()),r.removeConfidences&&this.confidencesInSVG?this.removeConfidence():r.showConfidences&&!this.confidencesInSVG?this.drawConfidence():e.has(".conf")&&this.confidencesInSVG&&((0,S.xi)(!0,this.distance,this.layout)?(i=N(".conf",t),A(this.svg,".conf",i,n)):this.removeConfidence()),r.timeSliceHasPotentiallyChanged&&this.showTemporalSlice(),r.newBranchLabellingKey?(this.removeBranchLabels(),"none"!==r.newBranchLabellingKey&&this.drawBranchLabels(r.newBranchLabellingKey)):e.has(".branchLabel")&&this.updateBranchLabels(n),this.measurementsColorGrouping?this.drawMeasurementsColoringCrosshair():this.removeMeasurementsColoringCrosshair()},J.prototype.modifySVGInStages=function(e,t,n,r,i){var o=this;e.delete(".tip"),this.hideGrid();var a=0,s=function(){o.drawBranches(),o.params.showGrid&&o.addGrid(),o.svg.selectAll(".tip").remove(),o.updateTipLabels(),o.drawTips(),o.vaccines&&o.drawVaccines(),o.measurementsColorGrouping&&o.drawMeasurementsColoringCrosshair(),o.showTemporalSlice(),o.regression&&o.drawRegression(),e.has(".branchLabel")&&o.drawBranchLabels(i.newBranchLabellingKey||o.params.branchLabelKey)};this.confidencesInSVG=!1,this.svg.selectAll(I(e).join(", ")).transition().duration(n).style("opacity",0).remove().on("start",(function(){return a++})).on("end",(function(){if(!--a){o.setClipMask();var e=N(".tip",t);A(o.svg,".tip",e,r),setTimeout(s,r)}})),this.hideTemporalSlice(),this.removeMeasurementsColoringCrosshair(),n||(0,u.R8)()},J.prototype.render=function(e){var t=this,n=e.svg,r=e.layout,i=e.distance,o=e.focus,a=e.parameters,s=e.callbacks,l=e.branchThickness,c=e.visibility,u=e.drawConfidence,d=e.vaccines,p=e.branchStroke,f=e.tipStroke,m=e.tipFill,g=e.tipRadii,y=e.dateRange,v=e.scatterVariables,w=e.measurementsColorGrouping;this.svg=n,this.params=b(b({},this.params),a),this.callbacks=s,this.vaccines=d?d.map((function(e){return e.shell})):void 0,this.measurementsColorGrouping=w,this.dateRange=y,this.nodes.forEach((function(e,n){e.branchStroke=p[n],e.tipStroke=f[n],e.fill=m[n],e.visibility=c[n],e["stroke-width"]=l[n],e.r=g?g[n]:t.params.tipRadius})),(0,h.Td)({nodes:this.nodes,focus:o}),this.setDistance(i),this.setLayout(r,v),this.mapToScreen(),this.setClipMask(),this.params.showGrid&&(this.addGrid(),this.showTemporalSlice()),this.drawBranches(),this.updateTipLabels(),this.drawTips(),this.params.branchLabelKey&&this.drawBranchLabels(this.params.branchLabelKey),this.vaccines&&this.drawVaccines(),this.measurementsColorGrouping&&this.drawMeasurementsColoringCrosshair(),this.regression&&this.drawRegression(),this.confidencesInSVG=!1,u&&this.drawConfidence(),this.timeLastRenderRequested=Date.now()},J.prototype.clearSVG=function(){this.svg.selectAll("*").remove()},J.prototype.setClipMask=function(){var e=g(this.yScale.range(),2),t=e[0],n=e[1],r=g(this.xScale.range(),2),i=r[0],o=r[1];if(parseInt(i,10)>parseInt(o,10)){var a=[o,i];i=a[0],o=a[1]}var s=i-5,l=o-i+20,c=t-15,u=n-t+20;this.groups.clipPath?this.groups.clipPath.select("rect").attr("x",s).attr("y",c).attr("width",l).attr("height",u):(this.groups.clipPath=this.svg.append("g").attr("id","clipGroup"),this.groups.clipPath.append("clipPath").attr("id","treeClip").append("rect").attr("x",s).attr("y",c).attr("width",l).attr("height",u))},J.prototype.drawTips=function(){var e=this.params;"tips"in this.groups||(this.groups.tips=this.svg.append("g").attr("id","tips").attr("clip-path","url(#treeClip)")),this.groups.tips.selectAll(".tip").data(this.nodes.filter((function(e){return!e.n.hasChildren}))).enter().append("circle").attr("class","tip").attr("id",(function(e){return(0,h.yQ)("tip",e.n.name)})).attr("cx",(function(e){return e.xTip})).attr("cy",(function(e){return e.yTip})).attr("r",(function(e){return e.r})).on("mouseover",this.callbacks.onTipHover).on("mouseout",this.callbacks.onTipLeave).on("click",this.callbacks.onTipClick).style("pointer-events","auto").style("visibility",(function(e){return e.visibility===p.m7?"visible":"hidden"})).style("fill",(function(t){return t.fill||e.tipFill})).style("stroke",(function(t){return t.tipStroke||e.tipStroke})).style("stroke-width",(function(){return e.tipStrokeWidth})).style("cursor","pointer")},J.prototype.drawBranches=function(){var e=this.params;"branchTee"in this.groups||(this.groups.branchTee=this.svg.append("g").attr("id","branchTee").attr("clip-path","url(#treeClip)")),"clock"===this.layout||"scatter"===this.layout||"unrooted"===this.layout?this.groups.branchTee.selectAll("*").remove():this.groups.branchTee.selectAll(".branch").data(this.nodes.filter((function(e){return e.n.hasChildren&&void 0!==e.displayOrder}))).enter().append("path").attr("class","branch T").attr("id",(function(e){return(0,h.yQ)("branchT",e.n.name)})).attr("d",(function(e){return e.branch[1]})).style("stroke",(function(t){return t.branchStroke||e.branchStroke})).style("stroke-width",(function(t){return t["stroke-width"]||e.branchStrokeWidth})).style("visibility",E).style("fill","none").style("pointer-events","auto").on("mouseover",this.callbacks.onBranchHover).on("mouseout",this.callbacks.onBranchLeave).on("click",this.callbacks.onBranchClick),this.groups.branchGradientDefs||(this.groups.branchGradientDefs=this.svg.append("defs")),this.groups.branchGradientDefs.selectAll("*").remove(),this.updateColorBy(),"branchStem"in this.groups||(this.groups.branchStem=this.svg.append("g").attr("id","branchStem").attr("clip-path","url(#treeClip)")),this.groups.branchStem.selectAll(".branch").data(this.nodes.filter((function(e){return void 0!==e.displayOrder}))).enter().append("path").attr("class","branch S").attr("id",(function(e){return(0,h.yQ)("branchS",e.n.name)})).attr("d",(function(e){return e.branch[0]})).style("stroke",(function(t){return t.branchStroke?k(t):e.branchStroke})).style("stroke-linecap","round").style("stroke-width",(function(t){return t["stroke-width"]||e.branchStrokeWidth})).style("visibility",E).style("cursor",(function(e){return e.visibility===p.m7?"pointer":"default"})).style("pointer-events","auto").on("mouseover",this.callbacks.onBranchHover).on("mouseout",this.callbacks.onBranchLeave).on("click",this.callbacks.onBranchClick)},J.prototype.drawVaccines=function(){this.vaccines&&this.vaccines.length&&("vaccines"in this.groups||(this.groups.vaccines=this.svg.append("g").attr("id","vaccines")),this.groups.vaccines.selectAll(".vaccineCross").data(this.vaccines).enter().append("path").attr("class","vaccineCross").attr("d",(function(e){return e.vaccineCross})).style("stroke","#333").style("stroke-width",2*this.params.branchStrokeWidth).style("fill","none").style("cursor","pointer").style("pointer-events","auto").on("mouseover",this.callbacks.onTipHover).on("mouseout",this.callbacks.onTipLeave).on("click",this.callbacks.onTipClick))},J.prototype.drawMeasurementsColoringCrosshair=function(){var e=this;"measurementsColoringCrosshair"in this.groups?this.removeMeasurementsColoringCrosshair():this.groups.measurementsColoringCrosshair=this.svg.append("g").attr("id","measurementsColoringCrosshairId");var t=this.nodes.filter((function(t){return!t.n.hasChildren&&t.n.name===e.measurementsColorGrouping}));1===t.length?this.groups.measurementsColoringCrosshair.selectAll(".crosshair").data(t).enter().append("svg").attr("stroke","currentColor").attr("fill","currentColor").attr("strokeWidth","0").attr("viewBox","0 0 256 256").attr("height",(function(e){return 5*e.r})).attr("width",(function(e){return 5*e.r})).attr("x",(function(e){return e.xTip-5*e.r/2})).attr("y",(function(e){return e.yTip-5*e.r/2})).style("cursor","pointer").style("pointer-events","auto").on("mouseover",this.callbacks.onTipHover).on("mouseout",this.callbacks.onTipLeave).on("click",this.callbacks.onTipClick).append("path").attr("d","M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm12,191.13V184a12,12,0,0,0-24,0v27.13A84.18,84.18,0,0,1,44.87,140H72a12,12,0,0,0,0-24H44.87A84.18,84.18,0,0,1,116,44.87V72a12,12,0,0,0,24,0V44.87A84.18,84.18,0,0,1,211.13,116H184a12,12,0,0,0,0,24h27.13A84.18,84.18,0,0,1,140,211.13Z"):0===t.length?console.warn("Measurements coloring group ".concat(this.measurementsColorGrouping," doesn't match any tip names")):console.warn("Measurements coloring group ".concat(this.measurementsColorGrouping," matches multiple tips"))},J.prototype.removeMeasurementsColoringCrosshair=function(){"measurementsColoringCrosshair"in this.groups&&this.groups.measurementsColoringCrosshair.selectAll("*").remove()},J.prototype.drawRegression=function(){if(void 0!==this.regression.slope){var e,t,n,r=this.yScale(this.regression.intercept+this.xScale.domain()[0]*this.regression.slope),i=this.yScale(this.regression.intercept+this.xScale.domain()[1]*this.regression.slope),o="M "+this.xScale.range()[0].toString()+" "+r.toString()+" L "+this.xScale.range()[1].toString()+" "+i.toString();"regression"in this.groups||(this.groups.regression=this.svg.append("g").attr("id","regression").attr("clip-path","url(#treeClip)")),this.groups.regression.append("path").attr("d",o).attr("class","regression").style("fill","none").style("visibility","visible").style("stroke",this.params.regressionStroke).style("stroke-width",this.params.regressionWidth),this.groups.regression.append("text").text((e=this.regression,t=this.layout,n=this.yScale,"clock"===t?(0,h.jP)(n)?"rate estimate: ".concat(e.slope.toExponential(2)," subs per site per year"):"rate estimate: ".concat((0,h.dX)(e.slope)," subs per year"):"intercept = ".concat(e.intercept.toPrecision(3),", slope = ").concat(e.slope.toPrecision(3),", R^2 = ").concat(e.r2.toPrecision(3)))).attr("class","regression").attr("x",this.xScale.range()[1]/2-75).attr("y",this.yScale.range()[0]+50).style("fill",this.params.regressionStroke).style("font-size",this.params.tickLabelSize+8).style("font-weight",400).style("font-family",this.params.fontFamily)}},J.prototype.removeRegression=function(){"regression"in this.groups&&this.groups.regression.selectAll("*").remove()},J.prototype.updateColorBy=function(){},J.prototype.setDistance=function(e){this.nodes.forEach((function(e){e.update=!0})),e&&(this.distance=e),["div","num_date"].includes(this.distance)||(console.error("Tree distance measure not set or invalid. Using `div`."),this.distance="div"),"div"===this.distance?this.nodes.forEach((function(e){e.depth=(0,C.KT)(e.n),e.pDepth=(0,C.KT)((0,h.Fw)(e.n)),e.conf=[e.depth,e.depth]})):this.nodes.forEach((function(e){e.depth=(0,C.rs)(e.n,"num_date"),e.pDepth=(0,C.rs)((0,h.Fw)(e.n),"num_date"),e.conf=(0,C.rs)(e.n,"num_date",{confidence:!0})||[e.depth,e.depth]})),this.vaccines&&this.vaccines.forEach((function(e){e.crossDepth=e.depth}))},J.prototype.setLayout=function(e,t){void 0!==e&&e===this.layout||this.nodes.forEach((function(e){e.update=!0})),this.layout=void 0===e?"rect":e,this.regression=void 0,t&&(this.scatterVariables=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){G(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)),"clock"===this.layout&&(this.scatterVariables.x="num_date",this.scatterVariables.y="div"),"rect"===this.layout?this.rectangularLayout():"clock"===this.layout||"scatter"===this.layout?this.scatterplotLayout():"radial"===this.layout?this.radialLayout():"unrooted"===this.layout&&this.unrootedLayout()},J.prototype.rectangularLayout=function(){this.nodes.forEach((function(e){e.y=e.displayOrder,e.x=e.depth,e.px=e.pDepth,e.py=e.y})),this.vaccines&&this.vaccines.forEach((function(e){e.xCross=e.crossDepth,e.yCross=e.y}))},J.prototype.scatterplotLayout=function(){if(this.scatterVariables){var e,t="displayOrder"===this.scatterVariables.x||"displayOrder"===this.scatterVariables.y?(0,h.rG)(this.nodes):void 0,n=D(this.nodes);try{for(n.s();!(e=n.n()).done;){var r=e.value;if("div"===this.scatterVariables.x)r.x=(0,C.KT)(r.n),r.px=(0,C.KT)((0,h.Fw)(r.n));else if("gt"===this.scatterVariables.x)r.x=r.n.currentGt,r.px=(0,h.Fw)(r.n).currentGt;else if("displayOrder"===this.scatterVariables.x){var i=M(t(r),2);r.x=i[0],r.px=i[1]}else if(r.x=(0,C.rs)(r.n,this.scatterVariables.x),r.px=(0,C.rs)((0,h.Fw)(r.n),this.scatterVariables.x),this.scatterVariables.xTemporal){var o=[(0,m.X6)(r.x),(0,m.X6)(r.px)];r.x=o[0],r.px=o[1]}if("div"===this.scatterVariables.y)r.y=(0,C.KT)(r.n),r.py=(0,C.KT)((0,h.Fw)(r.n));else if("gt"===this.scatterVariables.y)r.y=r.n.currentGt,r.py=(0,h.Fw)(r.n).currentGt;else if("displayOrder"===this.scatterVariables.y){var a=M(t(r),2);r.y=a[0],r.py=a[1]}else if(r.y=(0,C.rs)(r.n,this.scatterVariables.y),r.py=(0,C.rs)((0,h.Fw)(r.n),this.scatterVariables.y),this.scatterVariables.yTemporal){var s=[(0,m.X6)(r.y),(0,m.X6)(r.py)];r.y=s[0],r.py=s[1]}}}catch(e){n.e(e)}finally{n.f()}this.vaccines&&this.vaccines.forEach((function(e){e.xCross=e.x,e.yCross=e.y})),this.scatterVariables.showRegression&&this.calculateRegression()}else console.error("Scatterplot called without variables")},J.prototype.unrootedLayout=function(){var e=H(this.nodes[0].n),t=1.5*Math.PI,n=this.nodes[0].n.children;this.nodes.forEach((function(e){e.x=void 0,e.y=void 0,e.px=void 0,e.py=void 0}));for(var r=0;r<n.length;r++){var i=n[r].shell;if(i.w=2*Math.PI*H(i.n)/e,i.w>0){var o=i.depth-this.nodes[0].depth;i.px=o*Math.cos(t+.5*i.w),i.py=o*Math.sin(t+.5*i.w),i.tau=t,W(i,e),t+=i.w}}this.vaccines&&this.vaccines.forEach((function(e){var t=e.crossDepth-e.depth;e.xCross=e.px+t*Math.cos(e.tau+.5*e.w),e.yCross=e.py+t*Math.sin(e.tau+.5*e.w)})),this.nodes.forEach((function(e){delete e.tau,delete e.w}))},J.prototype.radialLayout=function(){var e,t=this,n=Math.max.apply(Math,function(e){if(Array.isArray(e))return V(e)}(e=this.nodes.map((function(e){return e.displayOrder})).filter((function(e){return e})))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||F(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=this.nodes[0].depth;this.nodes.forEach((function(e){var t=1.9*Math.PI*e.displayOrderRange[0]/n,i=1.9*Math.PI*e.displayOrderRange[1]/n;e.angle=1.9*Math.PI*e.displayOrder/n,e.y=(e.depth-r)*Math.cos(e.angle),e.x=(e.depth-r)*Math.sin(e.angle),e.py=e.y*(e.pDepth-r)/(e.depth-r+1e-15),e.px=e.x*(e.pDepth-r)/(e.depth-r+1e-15),e.yCBarStart=(e.depth-r)*Math.cos(t),e.xCBarStart=(e.depth-r)*Math.sin(t),e.yCBarEnd=(e.depth-r)*Math.cos(i),e.xCBarEnd=(e.depth-r)*Math.sin(i),e.smallBigArc=Math.abs(i-t)>1*Math.PI})),this.vaccines&&this.vaccines.forEach((function(e){"div"===t.distance?(e.xCross=e.x,e.yCross=e.y):(e.xCross=(e.crossDepth-r)*Math.sin(e.angle),e.yCross=(e.crossDepth-r)*Math.cos(e.angle))}))},J.prototype.setScales=function(){"scatter"!==this.layout||this.scatterVariables.xContinuous?this.xScale=(0,B.BY)():this.xScale=(0,B.q2)().round(!1).align(.5).padding(.5),"scatter"!==this.layout||this.scatterVariables.yContinuous?this.yScale=(0,B.BY)():this.yScale=(0,B.q2)().round(!1).align(.5).padding(.5);var e=parseInt(this.svg.attr("width"),10),t=parseInt(this.svg.attr("height"),10);if("radial"===this.layout||"unrooted"===this.layout){var n=e-this.margins.left-this.margins.right,r=t-this.margins.bottom-this.margins.top,i=Math.min(n,r),o=n-i,a=r-i;this.xScale.range([.5*o+this.margins.left,e-.5*o-this.margins.right]),this.yScale.range([.5*a+this.margins.top,t-.5*a-this.margins.bottom])}else this.params.orientation[0]>0?this.xScale.range([this.margins.left,e-this.margins.right]):this.xScale.range([e-this.margins.right,this.margins.left]),this.params.orientation[1]>0?this.yScale.range([this.margins.top,t-this.margins.bottom]):this.yScale.range([t-this.margins.bottom,this.margins.top])},J.prototype.mapToScreen=function(){var e=this,t=this.nodes.filter((function(e){return!e.n.hasChildren})).filter((function(e){return e.inView}));this.margins={left:"scatter"===this.layout||"clock"===this.layout?40:5,right:5+Z(this.params,t),top:"radial"===this.layout?10:15,bottom:35},this.setScales(),this.setClipMask();var n,r,i,o,a=this.nodes.filter((function(e){return e.inView&&void 0!==e.y&&void 0!==e.x}));if("scatter"===this.layout&&!1===this.scatterVariables.showBranches&&(a=a.filter((function(e){return!e.n.hasChildren}))),"scatter"!==this.layout||this.scatterVariables.xContinuous){var s=1e6,l=-1e5;a.forEach((function(e){e.x<s&&(s=e.x),e.x>l&&(l=e.x)})),s===l&&(s-=.005,l+=.005);var c=1e-8;(i=l-s)<c&&(l=c-s,i=c),"rect"===this.layout&&0!==this.zoomNode.n.arrayIdx&&(s-=(l-s)/20),n=[s,l]}else{var u=new Set(a.map((function(e){return e.x})));q(n=this.scatterVariables.xDomain.filter((function(e){return u.has(e)})),this.xScale)}if("scatter"!==this.layout||this.scatterVariables.yContinuous){var d=1e6,p=-1e5;if(a.forEach((function(e){e.y<d&&(d=e.y),e.y>p&&(p=e.y)})),t.length<30){var f=.05*(p-d);d-=f,p+=f}o=p-d,r=[d,p]}else{var m=new Set(a.map((function(e){return e.y})));q(r=this.scatterVariables.yDomain.filter((function(e){return m.has(e)})),this.yScale)}if("radial"===this.layout||"unrooted"===this.layout){var g=Math.max(o,i),y=i>o?.5*(i-o):0,v=i<o?.5*(o-i):0;n=[n[0]-v,n[0]+g-v],r=[r[0]-y,r[0]+g-y]}"clock"!==this.layout&&"scatter"!==this.layout||r.reverse(),this.xScale.domain(n),this.yScale.domain(r);var b=this.yScale.range()[1]+100,w=this.xScale.range()[0]-100;if(this.nodes.forEach((function(t){t.xTip=e.xScale(t.x),t.yTip=e.yScale(t.y),t.xBase=e.xScale(t.px),t.yBase=e.yScale(t.py),t.rot=180*Math.atan2(t.yTip-t.yBase,t.xTip-t.xBase)/Math.PI})),"scatter"===this.layout&&(this.scatterVariables.yContinuous||U("y",this.yScale,this.nodes),this.scatterVariables.xContinuous||U("x",this.xScale,this.nodes),this.nodes.forEach((function(e){isNaN(e.xTip)&&(e.xTip=w),isNaN(e.yTip)&&(e.yTip=b),isNaN(e.xBase)&&(e.xBase=w),isNaN(e.yBase)&&(e.yBase=b)}))),this.vaccines&&this.vaccines.forEach((function(t){var n=e.xScale(t.xCross),r=e.yScale(t.yCross);t.vaccineCross=" M ".concat(n-6,",").concat(r-6," L ").concat(n+6,",").concat(r+6," M ").concat(n-6,",").concat(r+6," L ").concat(n+6,",").concat(r-6)})),"unrooted"===this.layout)this.nodes.forEach((function(e){e.branch=[" M "+e.xBase.toString()+","+e.yBase.toString()+" L "+e.xTip.toString()+","+e.yTip.toString(),""]}));else if("clock"===this.layout||"scatter"===this.layout)this.scatterVariables.showBranches?this.nodes.forEach((function(e){e.branch=e.xBase===w||e.xTip===w||e.yBase===b||e.yTip===b?["",""]:[" M "+e.xBase.toString()+","+e.yBase.toString()+" L "+e.xTip.toString()+","+e.yTip.toString(),""]})):this.nodes.forEach((function(e){e.branch=["",""]}));else if("rect"===this.layout)this.nodes.forEach((function(t){var n=.5*((0,h.Fw)(t.n).shell["stroke-width"]-t["stroke-width"])||0,r=[e.yScale(t.displayOrderRange[0]),e.yScale(t.displayOrderRange[1])];t.branch=[" M ".concat(t.xBase-n,",").concat(t.yBase," L ").concat(t.xTip,",").concat(t.yTip+.01)," M ".concat(t.xTip,",").concat(r[0]," L ").concat(t.xTip,",").concat(r[1])],e.params.confidence&&(t.confLine=" M ".concat(e.xScale(t.conf[0]),",").concat(t.yBase," L ").concat(e.xScale(t.conf[1]),",").concat(t.yTip))}));else if("radial"===this.layout){var E=this.nodes[0].depth,k=this.nodes.map((function(e){return.5*((0,h.Fw)(e.n).shell["stroke-width"]-e["stroke-width"])||0}));this.nodes.forEach((function(t,n){t.branch=[" M "+(t.xBase-k[n]*Math.sin(t.angle)).toString()+" "+(t.yBase-k[n]*Math.cos(t.angle)).toString()+" L "+t.xTip.toString()+" "+t.yTip.toString(),""],t.n.hasChildren&&(t.branch[1]=" M "+e.xScale(t.xCBarStart).toString()+" "+e.yScale(t.yCBarStart).toString()+" A "+(e.xScale(t.depth)-e.xScale(E)).toString()+" "+(e.yScale(t.depth)-e.yScale(E)).toString()+" 0 "+(t.smallBigArc?"1 ":"0 ")+" 1  "+e.xScale(t.xCBarEnd).toString()+","+e.yScale(t.yCBarEnd).toString())}))}},J.prototype.calculateRegression=function(){"clock"===this.layout?this.regression=function(e){var t=e.filter((function(e){return!e.n.hasChildren&&e.visibility===p.m7})),n=t.length;if(0===n)return{slope:void 0,intercept:void 0,r2:void 0};var r=e[0].x,i=(0,f.Z)(t.map((function(e){return e.y*(e.x-r)})))/n/((0,f.Z)(t.map((function(e){return(e.x-r)*(e.x-r)})))/n);return{slope:i,intercept:-r*i,r2:void 0}}(this.nodes):this.regression=function(e){var t=e.filter((function(e){return!e.n.hasChildren&&void 0!==e.x&&void 0!==e.y&&e.visibility===p.m7})),n=t.length;if(0===n)return{slope:void 0,intercept:void 0,r2:void 0};var r=(0,f.Z)(t.map((function(e){return e.x})))/n,i=(0,f.Z)(t.map((function(e){return e.y})))/n,o=(0,f.Z)(t.map((function(e){return(e.x-r)*(e.y-i)})))/(0,f.Z)(t.map((function(e){return Math.pow(e.x-r,2)}))),a=i-o*r,s=1-(0,f.Z)(t.map((function(e){return Math.pow(e.y-(a+o*e.x),2)})))/(0,f.Z)(t.map((function(e){return Math.pow(e.y-i,2)})));return{slope:o,intercept:a,r2:s}}(this.nodes)},J.prototype.removeConfidence=function(e){this.confidencesInSVG=!1,"confidenceIntervals"in this.groups&&(e?this.groups.confidenceIntervals.selectAll("*").transition().duration(e).style("opacity",0).remove():this.groups.confidenceIntervals.selectAll("*").remove())},J.prototype.drawConfidence=function(e){var t=this;this.confidencesInSVG=!0,"confidenceIntervals"in this.groups||(this.groups.confidenceIntervals=this.svg.append("g").attr("id","confidenceIntervals")),e?(this.groups.confidenceIntervals.selectAll(".conf").data(this.nodes).enter().call((function(e){return t.drawSingleCI(e,0)})),this.groups.confidenceIntervals.transition().duration(e).style("opacity",.5)):this.groups.confidenceIntervals.selectAll(".conf").data(this.nodes).enter().call((function(e){return t.drawSingleCI(e,.5)}))},J.prototype.drawSingleCI=function(e,t){e.append("path").attr("class","conf").attr("id",(function(e){return(0,h.yQ)("conf",e.n.name)})).attr("d",(function(e){return e.confLine})).style("stroke",(function(e){return e.branchStroke||"#888"})).style("opacity",t).style("fill","none").style("stroke-width",d).style("pointer-events","none")},J.prototype.drawBranchLabels=function(e){var t=this;this.params.branchLabelKey=e;var n=O(e),r=_(e),i=j(e,this.params.showAllBranchLabels,this.layout,this.zoomNode.n.tipCount);"branchLabels"in this.groups||(this.groups.branchLabels=this.svg.append("g").attr("id","branchLabels").attr("clip-path","url(#treeClip)")),this.groups.branchLabels.selectAll(".branchLabel").data(this.nodes.filter((function(t){return t.n.branch_attrs&&t.n.branch_attrs.labels&&t.n.branch_attrs.labels[e]}))).enter().append("text").attr("class","branchLabel").attr("x",(function(e){return e.xTip+(t.params.orientation[0]>0?-5:5)})).attr("y",(function(e){return e.yTip-t.params.branchLabelPadY})).style("text-anchor",this.params.orientation[0]>0?"end":"start").style("visibility",i).style("fill",this.params.branchLabelFill).style("font-family",this.params.branchLabelFont).style("font-weight",r).style("font-size",n).style("pointer-events","none").text((function(t){return t.n.branch_attrs.labels[e]}))},J.prototype.removeBranchLabels=function(){this.params.branchLabelKey=void 0,"branchLabels"in this.groups&&this.groups.branchLabels.selectAll("*").remove()},J.prototype.updateBranchLabels=function(e){var t=this;if(this.groups.branchLabels){var n=j(this.params.branchLabelKey,this.params.showAllBranchLabels,this.layout,this.zoomNode.n.tipCount),r=O(this.params.branchLabelKey),i=_(this.params.branchLabelKey);this.groups.branchLabels.selectAll(".branchLabel").transition().duration(e).attr("x",(function(e){return e.xTip-5})).attr("y",(function(e){return e.yTip-t.params.branchLabelPadY})).style("visibility",n).style("font-weight",i).style("font-size",r),e||(0,u.R8)()}},J.prototype.updateTipLabels=function(e){var t=this;"tipLabels"in this.groups?this.groups.tipLabels.selectAll("*").remove():this.groups.tipLabels=this.svg.append("g").attr("id","tipLabels");var n=this.callbacks.tipLabel,r=this.params.tipLabelPadX,i=this.params.tipLabelPadY,o=this.nodes.filter((function(e){return!e.n.hasChildren})).filter((function(e){return e.inView})),a=o.filter((function(e){return e.visibility===p.m7}));if(a.length<this.params.tipLabelBreakL1){var s=this.params.tipLabelFontSizeL1;o.length<this.params.tipLabelBreakL3?s=this.params.tipLabelFontSizeL3:o.length<this.params.tipLabelBreakL2&&(s=this.params.tipLabelFontSizeL2),window.setTimeout((function(){t.groups.tipLabels.selectAll(".tipLabel").data(a).enter().append("text").attr("x",(function(e){return e.xTip+r})).attr("y",(function(e){return e.yTip+i})).text((function(e){return n(e)})).attr("class","tipLabel").style("font-size",s.toString()+"px").style("pointer-events","none").style("visibility",(function(e){return e.visibility===p.m7?"visible":"hidden"}))}),e)}},J.prototype.removeTipLabels=function(){"tipLabels"in this.groups&&this.groups.tipLabels.selectAll("*").remove()},J.prototype.hideGrid=K.f7,J.prototype.addGrid=K.Et,J.prototype.showTemporalSlice=K.i_,J.prototype.hideTemporalSlice=K.Nf;const Y=J;var $=n(87040),X=n(72640),Q=n(6461),ee=function(e,t,n,r){var i={},o={},a=e?n.tree:n.treeToo,s=e?r.tree:r.treeToo,l=a.idxOfInViewRootNode!==s.idxOfInViewRootNode,c=n.dateMinNumeric!==r.dateMinNumeric||n.dateMaxNumeric!==r.dateMaxNumeric,u=n.filters!==r.filters;if(t.dateRange=[r.dateMinNumeric,r.dateMaxNumeric],!s.nodeColorsVersion||a.nodeColorsVersion===s.nodeColorsVersion&&r.colorByConfidence===n.colorByConfidence||(i.changeColorBy=!0,i.branchStroke=(0,m.qL)(s,!0,r.colorByConfidence,r.colorBy),i.tipStroke=(0,m.qL)(s,!1,r.colorByConfidence,r.colorBy),i.fill=i.tipStroke.map(m.m6),i.newMeasurementsColorGrouping=(0,Q.o6)(r.colorBy)?(0,Q.Iy)(r.colorBy):void 0),s.visibilityVersion&&a.visibilityVersion!==s.visibilityVersion&&(i.changeVisibility=!0,i.visibility=s.visibility),s.tipRadiiVersion&&a.tipRadiiVersion!==s.tipRadiiVersion&&(i.changeTipRadii=!0,i.tipRadii=s.tipRadii),a.branchThicknessVersion!==s.branchThicknessVersion&&(i.changeBranchThickness=!0,i.branchThickness=s.branchThickness),n.distanceMeasure!==r.distanceMeasure&&(i.newDistance=r.distanceMeasure),n.explodeAttr!==r.explodeAttr&&(i.changeNodeOrder=!0,i.focus=r.focus),n.focus!==r.focus?(i.focus=r.focus,i.updateLayout=!0):!0===n.focus&&!0===r.focus&&(l||c||u)&&(i.focus=!0,i.updateLayout=!0),!0===n.canRenderBranchLabels&&!1===r.canRenderBranchLabels?i.newBranchLabellingKey="none":(!1===n.canRenderBranchLabels&&!0===r.canRenderBranchLabels||n.selectedBranchLabel!==r.selectedBranchLabel||!1===n.scatterVariables.showBranches&&!0===r.scatterVariables.showBranches)&&(i.newBranchLabellingKey=r.selectedBranchLabel),n.showAllBranchLabels!==r.showAllBranchLabels&&(i.showAllBranchLabels=r.showAllBranchLabels),n.tipLabelKey!==r.tipLabelKey&&(i.newTipLabelKey=r.tipLabelKey),!0===n.temporalConfidence.display&&!1===r.temporalConfidence.display||!0===n.temporalConfidence.on&&!1===r.temporalConfidence.on?i.removeConfidences=!0:!0===r.temporalConfidence.display&&!1===n.temporalConfidence.on&&!0===r.temporalConfidence.on&&(i.showConfidences=!0),"scatter"!==r.layout&&"clock"!==r.layout||n.scatterVariables===r.scatterVariables||(i.updateLayout=!0,i.scatterVariables=r.scatterVariables),n.layout!==r.layout&&(i.newLayout=r.layout),l){var h=t.nodes[s.idxOfInViewRootNode];i.zoomIntoClade=h,"unrooted"===r.layout&&(i.updateLayout=!0)}n.width===r.width&&n.height===r.height||(i.svgHasChangedDimensions=!0),e&&n.showTreeToo!==r.showTreeToo&&(i.svgHasChangedDimensions=!0);var d=Object.keys(i).length>0;return d&&(i.animationInProgress="Pause"===r.animationPlayPauseButton,i.performanceFlags=r.performanceFlags,t.change(i)),{newState:!!Object.keys(o).length&&o,change:d}},te=n(15742),ne=function(e){e.visibility===p.m7&&((1===e.that.params.orientation[0]?this.state.tree:this.state.treeToo).svg.select("#"+(0,h.yQ)("tip",e.n.name)).attr("r",(function(e){return e.r+4})),this.setState({hoveredNode:{node:e,isBranch:!1}}))},re=function(e){e.visibility===p.m7&&(this.props.narrativeMode||(this.props.dispatch({type:te.c7,name:e.n.name,idx:e.n.arrayIdx,isBranch:!1,treeId:e.that.id}),this.props.dispatch((0,a.Rb)("add",p.Ac,[e.n.name]))))},ie=function(e){if(e.visibility===p.m7){if(function(e){e&&x(e,(0,m.ii)(e.n.parent.shell.branchStroke),(0,m.ii)(e.branchStroke))}(e),this.props.temporalConfidence.exists&&this.props.temporalConfidence.display&&!this.props.temporalConfidence.on){var t=1===e.that.params.orientation[0]?this.state.tree:this.state.treeToo;"confidenceIntervals"in t.groups||(t.groups.confidenceIntervals=t.svg.append("g").attr("id","confidenceIntervals")),t.groups.confidenceIntervals.selectAll(".conf").data([e]).enter().call((function(e){return t.drawSingleCI(e,.5)}))}this.setState({hoveredNode:{node:e,isBranch:!0}})}},oe=function(e){if(e.visibility===p.m7&&!this.props.narrativeMode)if(window.event instanceof PointerEvent&&window.event.shiftKey)this.props.dispatch({type:te.c7,name:e.n.name,idx:e.n.arrayIdx,isBranch:!0,treeId:e.that.id});else{var t,n,r=[void 0,void 0];if(e.n.branch_attrs&&void 0!==e.n.branch_attrs.labels&&(n=Object.keys(e.n.branch_attrs.labels).filter((function(e){return"aa"!==e}))),n&&n.length){var i=this.props.tree.availableBranchLabels;n.sort((function(e,t){return i.indexOf(e)-i.indexOf(t)}));var o=n[0];t="".concat(o,":").concat(e.n.branch_attrs.labels[o])}var s=1===e.that.params.orientation[0]?this.props.tree.observedMutations:this.props.treeToo.observedMutations,l=(0,h.uN)(e.n)===e.n.arrayIdx?(0,h.s7)(e.n,this.props.distanceMeasure,s).arrayIdx:e.n.arrayIdx;1===e.that.params.orientation[0]?r[0]=l:r[1]=l,this.props.dispatch((0,a.ss)({root:r,cladeSelected:t}))}},ae=function(e){(function(e){e&&x(e,e.n.parent.shell.branchStroke,e.branchStroke)})(e),this.props.temporalConfidence.exists&&this.props.temporalConfidence.display&&!this.props.temporalConfidence.on&&(1===e.that.params.orientation[0]?this.state.tree:this.state.treeToo).removeConfidence(),this.setState({hoveredNode:null})},se=function(e){var t=1===e.that.params.orientation[0]?this.state.tree:this.state.treeToo;this.state.hoveredNode&&t.svg.select("#"+(0,h.yQ)("tip",e.n.name)).attr("r",(function(e){return e.r})),this.setState({hoveredNode:null})},le=function(e){e.isBranch||(e.existingFilterState?"inactive"===e.existingFilterState&&this.props.dispatch((0,a.Rb)("inactivate",p.Ac,[e.name])):this.props.dispatch((0,a.Rb)("remove",p.Ac,[e.name]))),this.props.dispatch({type:te.q$})},ce=n(1326),ue=(n(2955),function(e,t,n,r){var i=t?e.domRefs.mainTree:e.domRefs.secondTree,o=t?r.tree:r.treeToo;if(o.loaded){var a=r.canRenderBranchLabels;Object.prototype.hasOwnProperty.call(r.scatterVariables,"showBranches")&&!1===r.scatterVariables.showBranches&&(a=!1);var s=(0,m.qL)(o,!1,r.colorByConfidence,r.colorBy);n.render({svg:(0,ce.Z)(i),layout:r.layout,distance:r.distanceMeasure,focus:r.focus,parameters:{grid:!0,confidence:r.temporalConfidence.display,branchLabelKey:a&&r.selectedBranchLabel,showAllBranchLabels:r.showAllBranchLabels,orientation:t?[1,1]:[-1,1],tipLabels:!0,showTipLabels:!0},callbacks:{onTipHover:ne.bind(e),onTipClick:re.bind(e),onBranchHover:ie.bind(e),onBranchClick:oe.bind(e),onBranchLeave:ae.bind(e),onTipLeave:se.bind(e),tipLabel:L(r.tipLabelKey)},branchThickness:o.branchThickness,visibility:o.visibility,drawConfidence:r.temporalConfidence.on,vaccines:o.vaccines,branchStroke:(0,m.qL)(o,!0,r.colorByConfidence,r.colorBy),tipStroke:s,tipFill:s.map(m.m6),tipRadii:o.tipRadii,dateRange:[r.dateMinNumeric,r.dateMaxNumeric],scatterVariables:r.scatterVariables,measurementsColorGrouping:(0,Q.o6)(r.colorBy)?(0,Q.Iy)(r.colorBy):void 0})}else console.warn("can't run renderTree (not loaded)")});function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){return ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ge(e,t)}function ye(e){return ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ye(e)}const ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(s,e);var t,n,i,o,a=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ye(i);if(o){var n=ye(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===he(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this,e)).state={left:0,top:31,lookup:void 0,drawn:!1},t.timeout=!1,t}return t=s,(n=[{key:"shouldComponentUpdate",value:function(e){return this.props.width!==e.width||this.props.height!==e.height||this.props.leftTreeName!==e.leftTreeName||this.props.rightTreeName!==e.rightTreeName}},{key:"drawLines",value:function(e){e||(e=this.props);var t=e.lookup.length>750?.25:e.lookup.length>100?.5:1;(0,ce.Z)(this.d3ref).selectAll("*").remove();var n=function(e){return function(t){var n=e.leftNodes[t[0]].shell,r=e.rightNodes[t[1]].shell;return"M ".concat(n.xTip,",").concat(n.yTip," H ").concat(e.width/2-e.spaceBetweenTrees/2," L ").concat(e.width/2+e.spaceBetweenTrees/2,",").concat(r.yTip," H ").concat(e.width/2+e.spaceBetweenTrees/2+r.xTip)}}(e);(0,ce.Z)(this.d3ref).selectAll(".tangleLine").data(e.lookup).enter().append("path").attr("class","tangleLine").attr("d",n).attr("stroke-width",t).attr("stroke",(function(t){return e.colors[t[0]]})).attr("fill","none")}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){!this.state.drawn&&e.rightNodes[0].shell&&(this.drawLines(e),this.setState({drawn:!0}))}},{key:"componentDidMount",value:function(){!this.state.drawn&&this.props.rightNodes[0].shell&&(this.drawLines(this.props),this.setState({drawn:!0}))}},{key:"componentDidUpdate",value:function(e){this.props.width===e.width&&this.props.height===e.height||(this.timeout?window.clearTimeout(this.timeout):(0,ce.Z)(this.d3ref).selectAll(".tangleLine").remove(),this.timeout=window.setTimeout(this.drawLines.bind(this),1e3))}},{key:"render",value:function(){var e=this,t={position:"absolute",top:5,zIndex:100,fontSize:16,color:"#000",fontWeight:500},n=[this.props.width/2-this.props.spaceBetweenTrees/2,this.props.width/2+this.props.spaceBetweenTrees/2];return r.createElement("div",{id:"TangleContainer"},r.createElement("div",{id:"MainTreeTitle",style:pe(pe({},t),{},{left:n[0],transform:"translateX(-100%)"})},this.props.leftTreeName),r.createElement("div",{id:"SecondTreeTitle",style:pe(pe({},t),{},{left:n[1]})},this.props.rightTreeName),r.createElement("div",{id:"TangleSvgContainer",style:{position:"absolute",left:this.state.left,top:this.state.top,zIndex:100,pointerEvents:"none"}},r.createElement("svg",{id:"Tangle",style:{cursor:"default",width:this.props.width,height:this.props.height},ref:function(t){e.d3ref=t}})))}}])&&me(t.prototype,n),s}(r.Component);var be=n(14303),we=function(e,t){for(var n=0,r=0,i=0,o=0,a=0,s=0,l=0;l<t.nodes.length;l++){var c=t.nodes[l];if(!c.n.children&&e.strainToNode[c.n.name]){var u=e.strainToNode[c.n.name].displayOrder,h=c.displayOrder;n++,r+=u,i+=h,o+=Math.pow(u,2),a+=Math.pow(h,2),s+=u*h}}return o/=n,a/=n,((s/=n)-(r/=n)*(i/=n))/Math.sqrt((o-Math.pow(r,2))*(a-Math.pow(i,2)))};function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){_e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Te(e,t){return Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Te(e,t)}function Ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var je=100,Le="LEFT",Ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(f,e);var t,n,i,u,d=(i=f,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Oe(i);if(u){var n=Oe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ce(e)}(this,e)});function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),_e(Ce(t=d.call(this,e)),"domRefs",void 0),_e(Ce(t),"tangleRef",void 0),_e(Ce(t),"clearSelectedNode",void 0),_e(Ce(t),"redrawTree",(function(){t.props.dispatch((0,a.ss)({root:[0,0]}))})),_e(Ce(t),"handlekeydownEvent",(function(e){"Escape"===e.key&&t.props.selectedNode&&t.clearSelectedNode(t.props.selectedNode)})),_e(Ce(t),"getStyles",(function(){var e=!!t.props.tree.idxOfFilteredRoot&&t.props.tree.idxOfInViewRootNode!==t.props.tree.idxOfFilteredRoot,n=!!t.props.treeToo.idxOfFilteredRoot&&t.props.treeToo.idxOfInViewRootNode!==t.props.treeToo.idxOfFilteredRoot,r=e||n,i=0!==t.props.tree.idxOfInViewRootNode||0!==t.props.treeToo.idxOfInViewRootNode;return{treeButtonsDiv:{zIndex:100,position:"absolute",right:5,top:0},resetTreeButton:{zIndex:100,display:"inline-block",marginLeft:4,cursor:i?"pointer":"auto",color:i?c.I6:c.CA},zoomToSelectedButton:{zIndex:100,display:"inline-block",cursor:r?"pointer":"auto",color:r?c.I6:c.CA,pointerEvents:r?"auto":"none"},zoomOutButton:{zIndex:100,display:"inline-block",cursor:i?"pointer":"auto",color:i?c.I6:c.CA,pointerEvents:i?"auto":"none",marginRight:"4px"}}})),_e(Ce(t),"zoomToSelected",(function(){t.props.dispatch((0,a.ss)({root:[t.props.tree.idxOfFilteredRoot,t.props.treeToo.idxOfFilteredRoot]}))})),_e(Ce(t),"zoomBack",(function(){var e=[void 0,void 0];if(0!==t.props.tree.idxOfInViewRootNode){var n=t.props.tree.nodes[t.props.tree.idxOfInViewRootNode];e[0]=(0,h.s7)(n,t.props.distanceMeasure,t.props.tree.observedMutations).arrayIdx}if(0!==t.props.treeToo.idxOfInViewRootNode){var r=t.props.treeToo.nodes[t.props.treeToo.idxOfInViewRootNode];e[1]=(0,h.s7)(r,t.props.distanceMeasure,t.props.treeToo.observedMutations).arrayIdx}t.props.dispatch((0,a.ss)({root:e}))})),t.domRefs={mainTree:null,secondTree:null},t.tangleRef=void 0,t.state={hoveredNode:null,tree:null,treeToo:null},t.clearSelectedNode=le.bind(Ce(t)),t}return t=f,(n=[{key:"setUpAndRenderTreeToo",value:function(e,t){var n,r;t.treeToo=new Y(e.treeToo.nodes,"RIGHT",e.treeToo.idxOfInViewRootNode),p.PD&&(n=t.tree,r=t.treeToo,function(e,t){for(var n=we(e,t),r=0;r<t.nodes.length;r++){var i=t.nodes[r],o=i.n;if(o.children){for(var a=o,s=function(){var e=a.children[0];a.children.forEach((function(t){t.shell.displayOrder<e.shell.displayOrder&&(e=t)})),a=e};a.hasChildren;)s();var l=a.shell.displayOrder-1;o.children.reverse(),(0,h.gH)(i,l);var c=we(e,t);n>c?(o.children.reverse(),(0,h.gH)(i,l)):n=c}}}(n,r),(0,h.Td)({nodes:r.nodes,focus:!1})),ue(this,!1,t.treeToo,e)}},{key:"componentDidMount",value:function(){if(document.addEventListener("keyup",this.handlekeydownEvent),this.props.tree.loaded){var e={};e.tree=new Y(this.props.tree.nodes,Le,this.props.tree.idxOfInViewRootNode),ue(this,!0,e.tree,this.props),this.props.showTreeToo&&this.setUpAndRenderTreeToo(this.props,e),e.geneSortFn=(0,C.MG)(this.props.genomeMap),this.setState(e)}}},{key:"componentDidUpdate",value:function(e){var t={},n=!1,r=ee(!0,this.state.tree,e,this.props),i=r.newState,o=r.change;i&&(t=i),e.showTreeToo!==this.props.showTreeToo?this.props.showTreeToo?(this.state.treeToo&&this.state.treeToo.clearSVG(),t.tree=this.state.tree,this.setUpAndRenderTreeToo(this.props,t),this.tangleRef&&this.tangleRef.drawLines()):t.treeToo=null:this.state.treeToo&&(n=ee(!1,this.state.treeToo,e,this.props).change),this.tangleRef&&(o||n)&&this.tangleRef.drawLines(),Object.keys(t).length&&this.setState(t)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.handlekeydownEvent)}},{key:"renderTreeDiv",value:function(e){var t=this,n=e.width,i=e.height,o=e.mainTree;return r.createElement("svg",{id:"d3treeParent",style:{pointerEvents:"auto",cursor:"default",userSelect:"none"},width:n,height:i},r.createElement("g",null,r.createElement("g",null,r.createElement("g",null,r.createElement("g",null,r.createElement("g",{id:o?"MainTree":"SecondTree",width:n,height:i,ref:function(e){o?t.domRefs.mainTree=e:t.domRefs.secondTree=e}}))))))}},{key:"render",value:function(){var e,t=this,n=this.props.t,i=this.getStyles(),a=this.props.showTreeToo?(this.props.width-je)/2:this.props.width;return r.createElement(s.Z,{center:!0,infocard:this.props.showOnlyPanels,title:n("Phylogeny")},r.createElement(be.Z,null,r.createElement(l.Z,{width:this.props.width})),r.createElement($.Z,{selectedNode:this.state.hoveredNode,colorBy:this.props.colorBy,colorByConfidence:this.props.colorByConfidence,colorScale:this.props.colorScale,colorings:this.props.colorings,geneSortFn:this.state.geneSortFn,observedMutations:this.props.tree.observedMutations,panelDims:{width:this.props.width,height:this.props.height,spaceBetweenTrees:je},tipLabelKey:this.props.tipLabelKey,t:n}),r.createElement(X.ZP,{clearSelectedNode:this.clearSelectedNode,selectedNode:this.props.selectedNode,nodesLhsTree:this.props.tree.nodes,nodesRhsTree:null===(e=this.props.treeToo)||void 0===e?void 0:e.nodes,observedMutations:this.props.tree.observedMutations,colorings:this.props.colorings,geneSortFn:this.state.geneSortFn,tipLabelKey:this.props.tipLabelKey,t:n}),this.props.showTangle&&this.state.tree&&this.state.treeToo?r.createElement(ve,{ref:function(e){t.tangleRef=e},width:this.props.width,height:this.props.height,lookup:this.props.treeToo.tangleTipLookup,leftNodes:this.props.tree.nodes,rightNodes:this.props.treeToo.nodes,colors:this.props.tree.nodeColors,cVersion:this.props.tree.nodeColorsVersion,vVersion:this.props.tree.visibilityVersion,metric:this.props.distanceMeasure,spaceBetweenTrees:je,leftTreeName:this.props.tree.name,rightTreeName:this.props.showTreeToo}):null,this.renderTreeDiv({width:a,height:this.props.height,mainTree:!0}),this.props.showTreeToo?r.createElement("div",{id:"treeSpacer",style:{width:je}}):null,this.props.showTreeToo?this.renderTreeDiv({width:a,height:this.props.height,mainTree:!1}):null,this.props.narrativeMode?null:r.createElement("div",{style:xe({},i.treeButtonsDiv)},r.createElement("button",{style:xe(xe({},c.PJ),i.zoomOutButton),onClick:this.zoomBack},r.createElement(o.oN5,null)),r.createElement("button",{style:xe(xe({},c.PJ),i.zoomToSelectedButton),onClick:this.zoomToSelected},n("Zoom to Selected")),r.createElement("button",{style:xe(xe({},c.PJ),i.resetTreeButton),onClick:this.redrawTree},n("Reset Layout"))))}}])&&Se(t.prototype,n),f}(r.Component);const Pe=(0,i.Z)()(Ie)},14303:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(82684);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(d,e);var t,n,l,c,u,h=(c=d,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=s(c);if(u){var n=s(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=h.call(this,e)).state={hasError:!1},t}return t=d,l=[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}],(n=[{key:"componentDidCatch",value:function(e,t){console.error(e),console.error(t)}},{key:"render",value:function(){return this.state.hasError?this.props.showNothing?null:r.createElement("h1",null,"Something went wrong."):this.props.children}}])&&o(t.prototype,n),l&&o(t,l),d}(r.Component)},6074:e=>{e.exports={version:"2.62.0"}},36878:(e,t,n)=>{"use strict";e.exports=n.p+"c9984902e51d6ba5445b.png"},69532:(e,t,n)=>{"use strict";e.exports=n.p+"fc937feae2803a928972.png"},69265:(e,t,n)=>{"use strict";e.exports=n.p+"cb66a8a569f121fc799e.jpg"}}]);